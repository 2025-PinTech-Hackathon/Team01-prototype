(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const nn=!1;var jt=Array.isArray,pi=Array.prototype.indexOf,Nr=Array.from,xn=Object.defineProperty,nt=Object.getOwnPropertyDescriptor,Sn=Object.getOwnPropertyDescriptors,mi=Object.prototype,gi=Array.prototype,Wr=Object.getPrototypeOf,on=Object.isExtensible;function kt(e){return typeof e=="function"}const it=()=>{};function bi(e){return e()}function Ot(e){for(var t=0;t<e.length;t++)e[t]()}const Be=2,Tn=4,ur=8,qr=16,Ze=32,wt=64,Kt=128,ke=256,Qt=512,ye=1024,ze=2048,ut=4096,Xe=8192,lr=16384,wi=32768,fr=65536,yi=1<<17,_i=1<<19,Cn=1<<20,Mr=1<<21,ot=Symbol("$state"),kn=Symbol("legacy props");function Ln(e){return e===this.v}function An(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Vr(e){return!An(e,this.v)}function Ri(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Si(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ti(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ci(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function ki(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Li(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ai(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ei(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let yt=!1,Mi=!1;function Di(){yt=!0}const zr=1,Gr=2,En=4,Oi=8,Ui=16,Pi=1,Ii=2,Bi=4,Fi=8,ji=16,Ni=1,Wi=2,Re=Symbol(),qi="http://www.w3.org/1999/xhtml";function Vi(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function dr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ee=null;function an(e){ee=e}function ht(e,t=!1,n){var i=ee={p:ee,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};yt&&!t&&(ee.l={s:null,u:null,r1:[],r2:It(!1)}),$r(()=>{i.d=!0})}function pt(e){const t=ee;if(t!==null){const c=t.e;if(c!==null){var n=ie,i=ne;t.e=null;try{for(var a=0;a<c.length;a++){var s=c[a];st(s.effect),Ge(s.reaction),Hr(s.fn)}}finally{st(n),Ge(i)}}ee=t.p,t.m=!0}return{}}function Nt(){return!yt||ee!==null&&ee.l===null}function tt(e){if(typeof e!="object"||e===null||ot in e)return e;const t=Wr(e);if(t!==mi&&t!==gi)return e;var n=new Map,i=jt(e),a=Ne(0),s=ne,c=f=>{var v=ne;Ge(s);var g=f();return Ge(v),g};return i&&n.set("length",Ne(e.length)),new Proxy(e,{defineProperty(f,v,g){(!("value"in g)||g.configurable===!1||g.enumerable===!1||g.writable===!1)&&Li();var y=n.get(v);return y===void 0?(y=c(()=>Ne(g.value)),n.set(v,y)):Z(y,c(()=>tt(g.value))),!0},deleteProperty(f,v){var g=n.get(v);if(g===void 0)v in f&&(n.set(v,c(()=>Ne(Re))),Sr(a));else{if(i&&typeof v=="string"){var y=n.get("length"),x=Number(v);Number.isInteger(x)&&x<y.v&&Z(y,x)}Z(g,Re),Sr(a)}return!0},get(f,v,g){var D;if(v===ot)return e;var y=n.get(v),x=v in f;if(y===void 0&&(!x||(D=nt(f,v))!=null&&D.writable)&&(y=c(()=>Ne(tt(x?f[v]:Re))),n.set(v,y)),y!==void 0){var w=I(y);return w===Re?void 0:w}return Reflect.get(f,v,g)},getOwnPropertyDescriptor(f,v){var g=Reflect.getOwnPropertyDescriptor(f,v);if(g&&"value"in g){var y=n.get(v);y&&(g.value=I(y))}else if(g===void 0){var x=n.get(v),w=x==null?void 0:x.v;if(x!==void 0&&w!==Re)return{enumerable:!0,configurable:!0,value:w,writable:!0}}return g},has(f,v){var w;if(v===ot)return!0;var g=n.get(v),y=g!==void 0&&g.v!==Re||Reflect.has(f,v);if(g!==void 0||ie!==null&&(!y||(w=nt(f,v))!=null&&w.writable)){g===void 0&&(g=c(()=>Ne(y?tt(f[v]):Re)),n.set(v,g));var x=I(g);if(x===Re)return!1}return y},set(f,v,g,y){var re;var x=n.get(v),w=v in f;if(i&&v==="length")for(var D=g;D<x.v;D+=1){var M=n.get(D+"");M!==void 0?Z(M,Re):D in f&&(M=c(()=>Ne(Re)),n.set(D+"",M))}x===void 0?(!w||(re=nt(f,v))!=null&&re.writable)&&(x=c(()=>Ne(void 0)),Z(x,c(()=>tt(g))),n.set(v,x)):(w=x.v!==Re,Z(x,c(()=>tt(g))));var $=Reflect.getOwnPropertyDescriptor(f,v);if($!=null&&$.set&&$.set.call(y,g),!w){if(i&&typeof v=="string"){var W=n.get("length"),Q=Number(v);Number.isInteger(Q)&&Q>=W.v&&Z(W,Q+1)}Sr(a)}return!0},ownKeys(f){I(a);var v=Reflect.ownKeys(f).filter(x=>{var w=n.get(x);return w===void 0||w.v!==Re});for(var[g,y]of n)y.v!==Re&&!(g in f)&&v.push(g);return v},setPrototypeOf(){Ai()}})}function Sr(e,t=1){Z(e,e.v+t)}function Ut(e){var t=Be|ze,n=ne!==null&&(ne.f&Be)!==0?ne:null;return ie===null||n!==null&&(n.f&ke)!==0?t|=ke:ie.f|=Cn,{ctx:ee,deps:null,effects:null,equals:Ln,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??ie}}function cr(e){const t=Ut(e);return t.equals=Vr,t}function Mn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)at(t[n])}}function zi(e){for(var t=e.parent;t!==null;){if((t.f&Be)===0)return t;t=t.parent}return null}function Dn(e){var t,n=ie;st(zi(e));try{Mn(e),t=Qn(e)}finally{st(n)}return t}function On(e){var t=Dn(e),n=(rt||(e.f&ke)!==0)&&e.deps!==null?ut:ye;Oe(e,n),e.equals(t)||(e.v=t,e.wv=Yn())}const Pt=new Map;function It(e,t){var n={f:0,v:e,reactions:null,equals:Ln,rv:0,wv:0};return n}function Ne(e,t){const n=It(e);return to(n),n}function qe(e,t=!1){var i;const n=It(e);return t||(n.equals=Vr),yt&&ee!==null&&ee.l!==null&&((i=ee.l).s??(i.s=[])).push(n),n}function Tr(e,t){return Z(e,Fe(()=>I(e))),t}function Z(e,t,n=!1){ne!==null&&!We&&Nt()&&(ne.f&(Be|qr))!==0&&!(we!=null&&we.includes(e))&&Ei();let i=n?tt(t):t;return Dr(e,i)}function Dr(e,t){if(!e.equals(t)){var n=e.v;Wt?Pt.set(e,t):Pt.set(e,n),e.v=t,(e.f&Be)!==0&&((e.f&ze)!==0&&Dn(e),Oe(e,(e.f&ke)===0?ye:ut)),e.wv=Yn(),Un(e,ze),Nt()&&ie!==null&&(ie.f&ye)!==0&&(ie.f&(Ze|wt))===0&&(De===null?ro([e]):De.push(e))}return t}function Un(e,t){var n=e.reactions;if(n!==null)for(var i=Nt(),a=n.length,s=0;s<a;s++){var c=n[s],f=c.f;(f&ze)===0&&(!i&&c===ie||(Oe(c,t),(f&(ye|ke))!==0&&((f&Be)!==0?Un(c,ut):br(c))))}}let Gi=!1;var sn,Pn,In,Bn;function $i(){if(sn===void 0){sn=window,Pn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;In=nt(t,"firstChild").get,Bn=nt(t,"nextSibling").get,on(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),on(n)&&(n.__t=void 0)}}function vr(e=""){return document.createTextNode(e)}function Jt(e){return In.call(e)}function hr(e){return Bn.call(e)}function te(e,t){return Jt(e)}function At(e,t){{var n=Jt(e);return n instanceof Comment&&n.data===""?hr(n):n}}function ue(e,t=1,n=!1){let i=e;for(;t--;)i=hr(i);return i}function Hi(e){e.textContent=""}function Fn(e){ie===null&&ne===null&&Si(),ne!==null&&(ne.f&ke)!==0&&ie===null&&xi(),Wt&&Ri()}function Yi(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function _t(e,t,n,i=!0){var a=ie,s={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:e|ze,first:null,fn:t,last:null,next:null,parent:a,prev:null,teardown:null,transitions:null,wv:0};if(n)try{gr(s),s.f|=wi}catch(v){throw at(s),v}else t!==null&&br(s);var c=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Cn|Kt))===0;if(!c&&i&&(a!==null&&Yi(s,a),ne!==null&&(ne.f&Be)!==0)){var f=ne;(f.effects??(f.effects=[])).push(s)}return s}function $r(e){const t=_t(ur,null,!1);return Oe(t,ye),t.teardown=e,t}function Or(e){Fn();var t=ie!==null&&(ie.f&Ze)!==0&&ee!==null&&!ee.m;if(t){var n=ee;(n.e??(n.e=[])).push({fn:e,effect:ie,reaction:ne})}else{var i=Hr(e);return i}}function Ki(e){return Fn(),Rt(e)}function Qi(e){const t=_t(wt,e,!0);return(n={})=>new Promise(i=>{n.outro?Bt(t,()=>{at(t),i(void 0)}):(at(t),i(void 0))})}function Hr(e){return _t(Tn,e,!1)}function jn(e,t){var n=ee,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=Rt(()=>{e(),!i.ran&&(i.ran=!0,Z(n.l.r2,!0),Fe(t))})}function Nn(){var e=ee;Rt(()=>{if(I(e.l.r2)){for(var t of e.l.r1){var n=t.effect;(n.f&ye)!==0&&Oe(n,ut),xt(n)&&gr(n),t.ran=!1}e.l.r2.v=!1}})}function Rt(e){return _t(ur,e,!0)}function dt(e,t=[],n=Ut){const i=t.map(n);return pr(()=>e(...i.map(I)))}function pr(e,t=0){return _t(ur|qr|t,e,!0)}function bt(e,t=!0){return _t(ur|Ze,e,!0,t)}function Wn(e){var t=e.teardown;if(t!==null){const n=Wt,i=ne;un(!0),Ge(null);try{t.call(null)}finally{un(n),Ge(i)}}}function qn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;(n.f&wt)!==0?n.parent=null:at(n,t),n=i}}function Ji(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Ze)===0&&at(t),t=n}}function at(e,t=!0){var n=!1;(t||(e.f&_i)!==0)&&e.nodes_start!==null&&(Xi(e.nodes_start,e.nodes_end),n=!0),qn(e,t&&!n),rr(e,0),Oe(e,lr);var i=e.transitions;if(i!==null)for(const s of i)s.stop();Wn(e);var a=e.parent;a!==null&&a.first!==null&&Vn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Xi(e,t){for(;e!==null;){var n=e===t?null:hr(e);e.remove(),e=n}}function Vn(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Bt(e,t){var n=[];Yr(e,n,!0),zn(n,()=>{at(e),t&&t()})}function zn(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var a of e)a.out(i)}else t()}function Yr(e,t,n){if((e.f&Xe)===0){if(e.f^=Xe,e.transitions!==null)for(const c of e.transitions)(c.is_global||n)&&t.push(c);for(var i=e.first;i!==null;){var a=i.next,s=(i.f&fr)!==0||(i.f&Ze)!==0;Yr(i,t,s?n:!1),i=a}}}function Xt(e){Gn(e,!0)}function Gn(e,t){if((e.f&Xe)!==0){e.f^=Xe,(e.f&ye)===0&&(e.f^=ye),xt(e)&&(Oe(e,ze),br(e));for(var n=e.first;n!==null;){var i=n.next,a=(n.f&fr)!==0||(n.f&Ze)!==0;Gn(n,a?t:!1),n=i}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let Ft=[],Ur=[];function $n(){var e=Ft;Ft=[],Ot(e)}function Zi(){var e=Ur;Ur=[],Ot(e)}function Kr(e){Ft.length===0&&queueMicrotask($n),Ft.push(e)}function eo(){Ft.length>0&&$n(),Ur.length>0&&Zi()}let Ht=!1,Zt=!1,er=null,ct=!1,Wt=!1;function un(e){Wt=e}let Et=[];let ne=null,We=!1;function Ge(e){ne=e}let ie=null;function st(e){ie=e}let we=null;function to(e){ne!==null&&ne.f&Mr&&(we===null?we=[e]:we.push(e))}let be=null,Ce=0,De=null;function ro(e){De=e}let Hn=1,tr=0,rt=!1;function Yn(){return++Hn}function xt(e){var x;var t=e.f;if((t&ze)!==0)return!0;if((t&ut)!==0){var n=e.deps,i=(t&ke)!==0;if(n!==null){var a,s,c=(t&Qt)!==0,f=i&&ie!==null&&!rt,v=n.length;if(c||f){var g=e,y=g.parent;for(a=0;a<v;a++)s=n[a],(c||!((x=s==null?void 0:s.reactions)!=null&&x.includes(g)))&&(s.reactions??(s.reactions=[])).push(g);c&&(g.f^=Qt),f&&y!==null&&(y.f&ke)===0&&(g.f^=ke)}for(a=0;a<v;a++)if(s=n[a],xt(s)&&On(s),s.wv>e.wv)return!0}(!i||ie!==null&&!rt)&&Oe(e,ye)}return!1}function no(e,t){for(var n=t;n!==null;){if((n.f&Kt)!==0)try{n.fn(e);return}catch{n.f^=Kt}n=n.parent}throw Ht=!1,e}function ln(e){return(e.f&lr)===0&&(e.parent===null||(e.parent.f&Kt)===0)}function mr(e,t,n,i){if(Ht){if(n===null&&(Ht=!1),ln(t))throw e;return}if(n!==null&&(Ht=!0),no(e,t),ln(t))throw e}function Kn(e,t,n=!0){var i=e.reactions;if(i!==null)for(var a=0;a<i.length;a++){var s=i[a];we!=null&&we.includes(e)||((s.f&Be)!==0?Kn(s,t,!1):t===s&&(n?Oe(s,ze):(s.f&ye)!==0&&Oe(s,ut),br(s)))}}function Qn(e){var D;var t=be,n=Ce,i=De,a=ne,s=rt,c=we,f=ee,v=We,g=e.f;be=null,Ce=0,De=null,rt=(g&ke)!==0&&(We||!ct||ne===null),ne=(g&(Ze|wt))===0?e:null,we=null,an(e.ctx),We=!1,tr++,e.f|=Mr;try{var y=(0,e.fn)(),x=e.deps;if(be!==null){var w;if(rr(e,Ce),x!==null&&Ce>0)for(x.length=Ce+be.length,w=0;w<be.length;w++)x[Ce+w]=be[w];else e.deps=x=be;if(!rt)for(w=Ce;w<x.length;w++)((D=x[w]).reactions??(D.reactions=[])).push(e)}else x!==null&&Ce<x.length&&(rr(e,Ce),x.length=Ce);if(Nt()&&De!==null&&!We&&x!==null&&(e.f&(Be|ut|ze))===0)for(w=0;w<De.length;w++)Kn(De[w],e);return a!==null&&a!==e&&(tr++,De!==null&&(i===null?i=De:i.push(...De))),y}finally{be=t,Ce=n,De=i,ne=a,rt=s,we=c,an(f),We=v,e.f^=Mr}}function io(e,t){let n=t.reactions;if(n!==null){var i=pi.call(n,e);if(i!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[i]=n[a],n.pop())}}n===null&&(t.f&Be)!==0&&(be===null||!be.includes(t))&&(Oe(t,ut),(t.f&(ke|Qt))===0&&(t.f^=Qt),Mn(t),rr(t,0))}function rr(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)io(e,n[i])}function gr(e){var t=e.f;if((t&lr)===0){Oe(e,ye);var n=ie,i=ee,a=ct;ie=e,ct=!0;try{(t&qr)!==0?Ji(e):qn(e),Wn(e);var s=Qn(e);e.teardown=typeof s=="function"?s:null,e.wv=Hn;var c=e.deps,f;nn&&Mi&&e.f&ze}catch(v){mr(v,e,n,i||e.ctx)}finally{ct=a,ie=n}}}function oo(){try{Ti()}catch(e){if(er!==null)mr(e,er,null);else throw e}}function Jn(){var e=ct;try{var t=0;for(ct=!0;Et.length>0;){t++>1e3&&oo();var n=Et,i=n.length;Et=[];for(var a=0;a<i;a++){var s=so(n[a]);ao(s)}Pt.clear()}}finally{Zt=!1,ct=e,er=null}}function ao(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];if((i.f&(lr|Xe))===0)try{xt(i)&&(gr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Vn(i):i.fn=null))}catch(a){mr(a,i,null,i.ctx)}}}function br(e){Zt||(Zt=!0,queueMicrotask(Jn));for(var t=er=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(wt|Ze))!==0){if((n&ye)===0)return;t.f^=ye}}Et.push(t)}function so(e){for(var t=[],n=e;n!==null;){var i=n.f,a=(i&(Ze|wt))!==0,s=a&&(i&ye)!==0;if(!s&&(i&Xe)===0){if((i&Tn)!==0)t.push(n);else if(a)n.f^=ye;else try{xt(n)&&gr(n)}catch(v){mr(v,n,null,n.ctx)}var c=n.first;if(c!==null){n=c;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}return t}function uo(e){for(var t;;){if(eo(),Et.length===0)return t;Zt=!0,Jn()}}async function lo(){await Promise.resolve(),uo()}function I(e){var t=e.f,n=(t&Be)!==0;if(ne!==null&&!We){if(!(we!=null&&we.includes(e))){var i=ne.deps;e.rv<tr&&(e.rv=tr,be===null&&i!==null&&i[Ce]===e?Ce++:be===null?be=[e]:(!rt||!be.includes(e))&&be.push(e))}}else if(n&&e.deps===null&&e.effects===null){var a=e,s=a.parent;s!==null&&(s.f&ke)===0&&(a.f^=ke)}return n&&(a=e,xt(a)&&On(a)),Wt&&Pt.has(e)?Pt.get(e):e.v}function Fe(e){var t=We;try{return We=!0,e()}finally{We=t}}const fo=-7169;function Oe(e,t){e.f=e.f&fo|t}function Qr(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ot in e)Pr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&ot in n&&Pr(n)}}}function Pr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Pr(e[i],t)}catch{}const n=Wr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Sn(n);for(let a in i){const s=i[a].get;if(s)try{s.call(e)}catch{}}}}}const co=["touchstart","touchmove"];function vo(e){return co.includes(e)}let fn=!1;function ho(){fn||(fn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Xn(e){var t=ne,n=ie;Ge(null),st(null);try{return e()}finally{Ge(t),st(n)}}function Zn(e,t,n,i=n){e.addEventListener(t,()=>Xn(n));const a=e.__on_r;a?e.__on_r=()=>{a(),i(!0)}:e.__on_r=()=>i(!0),ho()}const ei=new Set,Ir=new Set;function po(e,t,n,i={}){function a(s){if(i.capture||Lt.call(t,s),!s.cancelBubble)return Xn(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Kr(()=>{t.addEventListener(e,a,i)}):t.addEventListener(e,a,i),a}function Mt(e,t,n,i,a){var s={capture:i,passive:a},c=po(e,t,n,s);(t===document.body||t===window||t===document)&&$r(()=>{t.removeEventListener(e,c,s)})}function mo(e){for(var t=0;t<e.length;t++)ei.add(e[t]);for(var n of Ir)n(e)}function Lt(e){var re;var t=this,n=t.ownerDocument,i=e.type,a=((re=e.composedPath)==null?void 0:re.call(e))||[],s=a[0]||e.target,c=0,f=e.__root;if(f){var v=a.indexOf(f);if(v!==-1&&(t===document||t===window)){e.__root=t;return}var g=a.indexOf(t);if(g===-1)return;v<=g&&(c=v)}if(s=a[c]||e.target,s!==t){xn(e,"currentTarget",{configurable:!0,get(){return s||n}});var y=ne,x=ie;Ge(null),st(null);try{for(var w,D=[];s!==null;){var M=s.assignedSlot||s.parentNode||s.host||null;try{var $=s["__"+i];if($!=null&&(!s.disabled||e.target===s))if(jt($)){var[W,...Q]=$;W.apply(s,[e,...Q])}else $.call(s,e)}catch(Y){w?D.push(Y):w=Y}if(e.cancelBubble||M===t||M===null)break;s=M}if(w){for(let Y of D)queueMicrotask(()=>{throw Y});throw w}}finally{e.__root=t,delete e.currentTarget,Ge(y),st(x)}}}function go(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function nr(e,t){var n=ie;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function pe(e,t){var n=(t&Ni)!==0,i=(t&Wi)!==0,a,s=!e.startsWith("<!>");return()=>{a===void 0&&(a=go(s?e:"<!>"+e),n||(a=Jt(a)));var c=i||Pn?document.importNode(a,!0):a.cloneNode(!0);if(n){var f=Jt(c),v=c.lastChild;nr(f,v)}else nr(c,c);return c}}function dn(e=""){{var t=vr(e+"");return nr(t,t),t}}function Yt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=vr();return e.append(t,n),nr(t,n),e}function se(e,t){e!==null&&e.before(t)}function vt(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function bo(e,t){return wo(e,t)}const mt=new Map;function wo(e,{target:t,anchor:n,props:i={},events:a,context:s,intro:c=!0}){$i();var f=new Set,v=x=>{for(var w=0;w<x.length;w++){var D=x[w];if(!f.has(D)){f.add(D);var M=vo(D);t.addEventListener(D,Lt,{passive:M});var $=mt.get(D);$===void 0?(document.addEventListener(D,Lt,{passive:M}),mt.set(D,1)):mt.set(D,$+1)}}};v(Nr(ei)),Ir.add(v);var g=void 0,y=Qi(()=>{var x=n??t.appendChild(vr());return bt(()=>{if(s){ht({});var w=ee;w.c=s}a&&(i.$$events=a),g=e(x,i)||{},s&&pt()}),()=>{var M;for(var w of f){t.removeEventListener(w,Lt);var D=mt.get(w);--D===0?(document.removeEventListener(w,Lt),mt.delete(w)):mt.set(w,D)}Ir.delete(v),x!==n&&((M=x.parentNode)==null||M.removeChild(x))}});return yo.set(g,y),g}let yo=new WeakMap;function Ie(e,t,[n,i]=[0,0]){var a=e,s=null,c=null,f=Re,v=n>0?fr:0,g=!1;const y=(w,D=!0)=>{g=!0,x(D,w)},x=(w,D)=>{f!==(f=w)&&(f?(s?Xt(s):D&&(s=bt(()=>D(a))),c&&Bt(c,()=>{c=null})):(c?Xt(c):D&&(c=bt(()=>D(a,[n+1,i]))),s&&Bt(s,()=>{s=null})))};pr(()=>{g=!1,t(y),g||x(null,null)},v)}function ti(e,t){return t}function _o(e,t,n,i){for(var a=[],s=t.length,c=0;c<s;c++)Yr(t[c].e,a,!0);var f=s>0&&a.length===0&&n!==null;if(f){var v=n.parentNode;Hi(v),v.append(n),i.clear(),et(e,t[0].prev,t[s-1].next)}zn(a,()=>{for(var g=0;g<s;g++){var y=t[g];f||(i.delete(y.k),et(e,y.prev,y.next)),at(y.e,!f)}})}function ri(e,t,n,i,a,s=null){var c=e,f={flags:t,items:new Map,first:null},v=(t&En)!==0;if(v){var g=e;c=g.appendChild(vr())}var y=null,x=!1,w=cr(()=>{var D=n();return jt(D)?D:D==null?[]:Nr(D)});pr(()=>{var D=I(w),M=D.length;x&&M===0||(x=M===0,Ro(D,f,c,a,t,i,n),s!==null&&(M===0?y?Xt(y):y=bt(()=>s(c)):y!==null&&Bt(y,()=>{y=null})),I(w))})}function Ro(e,t,n,i,a,s,c){var ae,_e,Le,He;var f=(a&Oi)!==0,v=(a&(zr|Gr))!==0,g=e.length,y=t.items,x=t.first,w=x,D,M=null,$,W=[],Q=[],re,Y,F,C;if(f)for(C=0;C<g;C+=1)re=e[C],Y=s(re,C),F=y.get(Y),F!==void 0&&((ae=F.a)==null||ae.measure(),($??($=new Set)).add(F));for(C=0;C<g;C+=1){if(re=e[C],Y=s(re,C),F=y.get(Y),F===void 0){var B=w?w.e.nodes_start:n;M=So(B,t,M,M===null?t.first:M.next,re,Y,C,i,a,c),y.set(Y,M),W=[],Q=[],w=M.next;continue}if(v&&xo(F,re,C,a),(F.e.f&Xe)!==0&&(Xt(F.e),f&&((_e=F.a)==null||_e.unfix(),($??($=new Set)).delete(F))),F!==w){if(D!==void 0&&D.has(F)){if(W.length<Q.length){var A=Q[0],N;M=A.prev;var z=W[0],J=W[W.length-1];for(N=0;N<W.length;N+=1)cn(W[N],A,n);for(N=0;N<Q.length;N+=1)D.delete(Q[N]);et(t,z.prev,J.next),et(t,M,z),et(t,J,A),w=A,M=J,C-=1,W=[],Q=[]}else D.delete(F),cn(F,w,n),et(t,F.prev,F.next),et(t,F,M===null?t.first:M.next),et(t,M,F),M=F;continue}for(W=[],Q=[];w!==null&&w.k!==Y;)(w.e.f&Xe)===0&&(D??(D=new Set)).add(w),Q.push(w),w=w.next;if(w===null)continue;F=w}W.push(F),M=F,w=F.next}if(w!==null||D!==void 0){for(var ce=D===void 0?[]:Nr(D);w!==null;)(w.e.f&Xe)===0&&ce.push(w),w=w.next;var me=ce.length;if(me>0){var $e=(a&En)!==0&&g===0?n:null;if(f){for(C=0;C<me;C+=1)(Le=ce[C].a)==null||Le.measure();for(C=0;C<me;C+=1)(He=ce[C].a)==null||He.fix()}_o(t,ce,$e,y)}}f&&Kr(()=>{var xe;if($!==void 0)for(F of $)(xe=F.a)==null||xe.apply()}),ie.first=t.first&&t.first.e,ie.last=M&&M.e}function xo(e,t,n,i){(i&zr)!==0&&Dr(e.v,t),(i&Gr)!==0?Dr(e.i,n):e.i=n}function So(e,t,n,i,a,s,c,f,v,g){var y=(v&zr)!==0,x=(v&Ui)===0,w=y?x?qe(a):It(a):a,D=(v&Gr)===0?c:It(c),M={i:D,v:w,k:s,a:null,e:null,prev:n,next:i};try{return M.e=bt(()=>f(e,w,D,g),Gi),M.e.prev=n&&n.e,M.e.next=i&&i.e,n===null?t.first=M:(n.next=M,n.e.next=M.e),i!==null&&(i.prev=M,i.e.prev=M.e),M}finally{}}function cn(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==i;){var c=hr(s);a.before(s),s=c}}function et(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Br(e,t,n){var i=e,a,s;pr(()=>{a!==(a=t())&&(s&&(Bt(s),s=null),a&&(s=bt(()=>n(i,a))))},fr)}function To(e,t,n){var i=e==null?"":""+e;return i===""?null:i}function Co(e,t,n,i,a,s){var c=e.__className;if(c!==n||c===void 0){var f=To(n);f==null?e.removeAttribute("class"):e.className=f,e.__className=n}return s}const ko=Symbol("is custom element"),Lo=Symbol("is html");function ni(e,t,n,i){var a=Ao(e);a[t]!==(a[t]=n)&&(n==null?e.removeAttribute(t):typeof n!="string"&&Eo(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ao(e){return e.__attributes??(e.__attributes={[ko]:e.nodeName.includes("-"),[Lo]:e.namespaceURI===qi})}var vn=new Map;function Eo(e){var t=vn.get(e.nodeName);if(t)return t;vn.set(e.nodeName,t=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=Sn(i);for(var s in n)n[s].set&&t.push(s);i=Wr(i)}return t}function Fr(e,t,n=t){var i=Nt();Zn(e,"input",a=>{var s=a?e.defaultValue:e.value;if(s=Cr(e)?kr(s):s,n(s),i&&s!==(s=t())){var c=e.selectionStart,f=e.selectionEnd;e.value=s??"",f!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(f,e.value.length))}}),Fe(t)==null&&e.value&&n(Cr(e)?kr(e.value):e.value),Rt(()=>{var a=t();Cr(e)&&a===kr(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Mo(e,t,n=t){Zn(e,"change",i=>{var a=i?e.defaultChecked:e.checked;n(a)}),Fe(t)==null&&n(e.checked),Rt(()=>{var i=t();e.checked=!!i})}function Cr(e){var t=e.type;return t==="number"||t==="range"}function kr(e){return e===""?null:+e}function hn(e,t){return e===t||(e==null?void 0:e[ot])===t}function Do(e={},t,n,i){return Hr(()=>{var a,s;return Rt(()=>{a=s,s=[],Fe(()=>{e!==n(...s)&&(t(e,...s),a&&hn(n(...a),e)&&t(null,...a))})}),()=>{Kr(()=>{s&&hn(n(...s),e)&&t(null,...s)})}}),e}function Oo(e){return function(...t){var n=t[0];return n.preventDefault(),e==null?void 0:e.apply(this,t)}}function qt(e=!1){const t=ee,n=t.l.u;if(!n)return;let i=()=>Qr(t.s);if(e){let a=0,s={};const c=Ut(()=>{let f=!1;const v=t.s;for(const g in v)v[g]!==s[g]&&(s[g]=v[g],f=!0);return f&&a++,a});i=()=>I(c)}n.b.length&&Ki(()=>{pn(t,i),Ot(n.b)}),Or(()=>{const a=Fe(()=>n.m.map(bi));return()=>{for(const s of a)typeof s=="function"&&s()}}),n.a.length&&Or(()=>{pn(t,i),Ot(n.a)})}function pn(e,t){if(e.l.s)for(const n of e.l.s)I(n);t()}function mn(e,t){var s;var n=(s=e.$$events)==null?void 0:s[t.type],i=jt(n)?n.slice():n==null?[]:[n];for(var a of i)a.call(this,t)}function Jr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),it;const i=Fe(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}const gt=[];function ii(e,t){return{subscribe:St(e,t).subscribe}}function St(e,t=it){let n=null;const i=new Set;function a(f){if(An(e,f)&&(e=f,n)){const v=!gt.length;for(const g of i)g[1](),gt.push(g,e);if(v){for(let g=0;g<gt.length;g+=2)gt[g][0](gt[g+1]);gt.length=0}}}function s(f){a(f(e))}function c(f,v=it){const g=[f,v];return i.add(g),i.size===1&&(n=t(a,s)||it),f(e),()=>{i.delete(g),i.size===0&&n&&(n(),n=null)}}return{set:a,update:s,subscribe:c}}function oi(e,t,n){const i=!Array.isArray(e),a=i?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return ii(n,(c,f)=>{let v=!1;const g=[];let y=0,x=it;const w=()=>{if(y)return;x();const M=t(i?g[0]:g,c,f);s?c(M):x=typeof M=="function"?M:it},D=a.map((M,$)=>Jr(M,W=>{g[$]=W,y&=~(1<<$),v&&w()},()=>{y|=1<<$}));return v=!0,w(),function(){Ot(D),x(),v=!1}})}function Uo(e){let t;return Jr(e,n=>t=n)(),t}let $t=!1,jr=Symbol();function ft(e,t,n){const i=n[t]??(n[t]={store:null,source:qe(void 0),unsubscribe:it});if(i.store!==e&&!(jr in n))if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=it;else{var a=!0;i.unsubscribe=Jr(e,s=>{a?i.source.v=s:Z(i.source,s)}),a=!1}return e&&jr in n?Uo(e):I(i.source)}function wr(){const e={};function t(){$r(()=>{for(var n in e)e[n].unsubscribe();xn(e,jr,{enumerable:!1,value:!0})})}return[e,t]}function Po(e){var t=$t;try{return $t=!1,[e(),$t]}finally{$t=t}}const Io={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(kt(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let a=e.props[i];kt(a)&&(a=a());const s=nt(a,t);if(s&&s.set)return s.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(kt(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const a=nt(i,t);return a&&!a.configurable&&(a.configurable=!0),a}}},has(e,t){if(t===ot||t===kn)return!1;for(let n of e.props)if(kt(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){kt(n)&&(n=n());for(const i in n)t.includes(i)||t.push(i)}return t}};function gn(...e){return new Proxy({props:e},Io)}function bn(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function Ve(e,t,n,i){var B;var a=(n&Pi)!==0,s=!yt||(n&Ii)!==0,c=(n&Fi)!==0,f=(n&ji)!==0,v=!1,g;c?[g,v]=Po(()=>e[t]):g=e[t];var y=ot in e||kn in e,x=c&&(((B=nt(e,t))==null?void 0:B.set)??(y&&t in e&&(A=>e[t]=A)))||void 0,w=i,D=!0,M=!1,$=()=>(M=!0,D&&(D=!1,f?w=Fe(i):w=i),w);g===void 0&&i!==void 0&&(x&&s&&ki(),g=$(),x&&x(g));var W;if(s)W=()=>{var A=e[t];return A===void 0?$():(D=!0,M=!1,A)};else{var Q=(a?Ut:cr)(()=>e[t]);Q.f|=yi,W=()=>{var A=I(Q);return A!==void 0&&(w=void 0),A===void 0?w:A}}if((n&Bi)===0)return W;if(x){var re=e.$$legacy;return function(A,N){return arguments.length>0?((!s||!N||re||v)&&x(N?W():A),A):W()}}var Y=!1,F=qe(g),C=Ut(()=>{var A=W(),N=I(F);return Y?(Y=!1,N):F.v=A});return c&&I(C),a||(C.equals=Vr),function(A,N){if(arguments.length>0){const z=N?I(C):s&&c?tt(A):A;if(!C.equals(z)){if(Y=!0,Z(F,z),M&&w!==void 0&&(w=z),bn(C))return A;Fe(()=>I(C))}return A}return bn(C)?C.v:I(C)}}function Xr(e){ee===null&&dr(),yt&&ee.l!==null?si(ee).m.push(e):Or(()=>{const t=Fe(e);if(typeof t=="function")return t})}function Bo(e){ee===null&&dr(),Xr(()=>()=>Fe(e))}function Fo(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function ai(){const e=ee;return e===null&&dr(),(t,n,i)=>{var s;const a=(s=e.s.$$events)==null?void 0:s[t];if(a){const c=jt(a)?a.slice():[a],f=Fo(t,n,i);for(const v of c)v.call(e.x,f);return!f.defaultPrevented}return!0}}function jo(e){ee===null&&dr(),ee.l===null&&Ci(),si(ee).a.push(e)}function si(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const No="5";var Rn;typeof window<"u"&&((Rn=window.__svelte??(window.__svelte={})).v??(Rn.v=new Set)).add(No);Di();function Wo(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,i,a,s,c=[],f="",v=e.split("/");for(v[0]||v.shift();a=v.shift();)n=a[0],n==="*"?(c.push("wild"),f+="/(.*)"):n===":"?(i=a.indexOf("?",1),s=a.indexOf(".",1),c.push(a.substring(1,~i?i:~s?s:a.length)),f+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(f+=(~i?"?":"")+"\\"+a.substring(s))):f+="/"+a;return{keys:c,pattern:new RegExp("^"+f+"/?$","i")}}function wn(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let i="";return n>-1&&(i=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:i}}const Zr=ii(null,function(t){t(wn());const n=()=>{t(wn())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});oi(Zr,e=>e.location);oi(Zr,e=>e.querystring);const yn=St(void 0);function qo(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Vo(e,t){ht(t,!1);let n=Ve(t,"routes",24,()=>({})),i=Ve(t,"prefix",8,""),a=Ve(t,"restoreScrollState",8,!1);class s{constructor(B,A){if(!A||typeof A!="function"&&(typeof A!="object"||A._sveltesparouter!==!0))throw Error("Invalid component object");if(!B||typeof B=="string"&&(B.length<1||B.charAt(0)!="/"&&B.charAt(0)!="*")||typeof B=="object"&&!(B instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:N,keys:z}=Wo(B);this.path=B,typeof A=="object"&&A._sveltesparouter===!0?(this.component=A.component,this.conditions=A.conditions||[],this.userData=A.userData,this.props=A.props||{}):(this.component=()=>Promise.resolve(A),this.conditions=[],this.props={}),this._pattern=N,this._keys=z}match(B){if(i()){if(typeof i()=="string")if(B.startsWith(i()))B=B.substr(i().length)||"/";else return null;else if(i()instanceof RegExp){const J=B.match(i());if(J&&J[0])B=B.substr(J[0].length)||"/";else return null}}const A=this._pattern.exec(B);if(A===null)return null;if(this._keys===!1)return A;const N={};let z=0;for(;z<this._keys.length;){try{N[this._keys[z]]=decodeURIComponent(A[z+1]||"")||null}catch{N[this._keys[z]]=null}z++}return N}async checkConditions(B){for(let A=0;A<this.conditions.length;A++)if(!await this.conditions[A](B))return!1;return!0}}const c=[];n()instanceof Map?n().forEach((C,B)=>{c.push(new s(B,C))}):Object.keys(n()).forEach(C=>{c.push(new s(C,n()[C]))});let f=qe(null),v=qe(null),g=qe({});const y=ai();async function x(C,B){await lo(),y(C,B)}let w=null,D=null;a()&&(D=C=>{C.state&&(C.state.__svelte_spa_router_scrollY||C.state.__svelte_spa_router_scrollX)?w=C.state:w=null},window.addEventListener("popstate",D),jo(()=>{qo(w)}));let M=null,$=null;const W=Zr.subscribe(async C=>{M=C;let B=0;for(;B<c.length;){const A=c[B].match(C.location);if(!A){B++;continue}const N={route:c[B].path,location:C.location,querystring:C.querystring,userData:c[B].userData,params:A&&typeof A=="object"&&Object.keys(A).length?A:null};if(!await c[B].checkConditions(N)){Z(f,null),$=null,x("conditionsFailed",N);return}x("routeLoading",Object.assign({},N));const z=c[B].component;if($!=z){z.loading?(Z(f,z.loading),$=z,Z(v,z.loadingParams),Z(g,{}),x("routeLoaded",Object.assign({},N,{component:I(f),name:I(f).name,params:I(v)}))):(Z(f,null),$=null);const J=await z();if(C!=M)return;Z(f,J&&J.default||J),$=z}A&&typeof A=="object"&&Object.keys(A).length?Z(v,A):Z(v,null),Z(g,c[B].props),x("routeLoaded",Object.assign({},N,{component:I(f),name:I(f).name,params:I(v)})).then(()=>{yn.set(I(v))});return}Z(f,null),$=null,yn.set(void 0)});Bo(()=>{W(),D&&window.removeEventListener("popstate",D)}),jn(()=>Qr(a()),()=>{history.scrollRestoration=a()?"manual":"auto"}),Nn(),qt();var Q=Yt(),re=At(Q);{var Y=C=>{var B=Yt(),A=At(B);Br(A,()=>I(f),(N,z)=>{z(N,gn({get params(){return I(v)}},()=>I(g),{$$events:{routeEvent(J){mn.call(this,t,J)}}}))}),se(C,B)},F=C=>{var B=Yt(),A=At(B);Br(A,()=>I(f),(N,z)=>{z(N,gn(()=>I(g),{$$events:{routeEvent(J){mn.call(this,t,J)}}}))}),se(C,B)};Ie(re,C=>{I(v)?C(Y):C(F,!1)})}se(e,Q),pt()}var zo=pe('<div class="h-full w-full flex flex-col mx-auto border p-5 rounded-3xl items-center justify-center space-y-4 bg-[#FFF8D8]"><h1 class="text-2xl font-bold text-gray-800">👋 Welcome Home!</h1> <p class="text-center px-4 text-gray-700">이곳은 Home 페이지입니다.</p> <a href="#/LLM" class="px-4 py-2 bg-[#FEE500] text-gray-800 rounded hover:bg-yellow-300 shadow">💬 채팅 시작</a></div>');function Go(e){var t=zo();se(e,t)}const Dt=St(null);async function $o(e,t){return new Promise(n=>{Dt.set({name:e,parameters:{...t},resolver:i=>n(i)})})}const ir=St(null);async function Ho(e,t,n){return new Promise(i=>{ir.set({name:e,parameters:{...t},exceedLimit:n,resolver:a=>i(a)})})}const or=St(null);async function ar(e,t){return new Promise(n=>{or.set({name:e,title:t,resolver:i=>n(i)})})}const en=St(!1);function Lr(){en.set(!0)}function Ar(){en.set(!1)}var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Er={exports:{}},_n;function Ko(){return _n||(_n=1,function(e){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function t(o,r){if(!o)throw"First parameter is required.";r=r||{type:"video"},r=new n(o,r);var u=this;function h(m){return r.disableLogs||console.log("RecordRTC version: ",u.version),m&&(r=new n(o,m)),r.disableLogs||console.log("started recording "+r.type+" stream."),L?(L.clearRecordedData(),L.record(),E("recording"),u.recordingDuration&&S(),u):(b(function(){u.recordingDuration&&S()}),u)}function b(m){m&&(r.initCallback=function(){m(),m=r.initCallback=null});var P=new i(o,r);L=new P(o,r),L.record(),E("recording"),r.disableLogs||console.log("Initialized recorderType:",L.constructor.name,"for output-type:",r.type)}function p(m){if(m=m||function(){},!L){O();return}if(u.state==="paused"){u.resumeRecording(),setTimeout(function(){p(m)},1);return}u.state!=="recording"&&!r.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',u.state),r.disableLogs||console.log("Stopped recording "+r.type+" stream."),r.type!=="gif"?L.stop(P):(L.stop(),P()),E("stopped");function P(V){if(!L){typeof m.call=="function"?m.call(u,""):m("");return}Object.keys(L).forEach(function(j){typeof L[j]!="function"&&(u[j]=L[j])});var d=L.blob;if(!d)if(V)L.blob=d=V;else throw"Recording failed.";if(d&&!r.disableLogs&&console.log(d.type,"->",Q(d.size)),m){var R;try{R=y.createObjectURL(d)}catch{}typeof m.call=="function"?m.call(u,R):m(R)}r.autoWriteToDisk&&U(function(j){var q={};q[r.type+"Blob"]=j,ae.Store(q)})}}function _(){if(!L){O();return}if(u.state!=="recording"){r.disableLogs||console.warn("Unable to pause the recording. Recording state: ",u.state);return}E("paused"),L.pause(),r.disableLogs||console.log("Paused recording.")}function l(){if(!L){O();return}if(u.state!=="paused"){r.disableLogs||console.warn("Unable to resume the recording. Recording state: ",u.state);return}E("recording"),L.resume(),r.disableLogs||console.log("Resumed recording.")}function k(m){postMessage(new FileReaderSync().readAsDataURL(m))}function U(m,P){if(!m)throw"Pass a callback function over getDataURL.";var V=P?P.blob:(L||{}).blob;if(!V){r.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){U(m,P)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var d=j(k);d.onmessage=function(q){m(q.data)},d.postMessage(V)}else{var R=new FileReader;R.readAsDataURL(V),R.onload=function(q){m(q.target.result)}}function j(q){try{var X=y.createObjectURL(new Blob([q.toString(),"this.onmessage =  function (eee) {"+q.name+"(eee.data);}"],{type:"application/javascript"})),H=new Worker(X);return y.revokeObjectURL(X),H}catch{}}}function S(m){if(m=m||0,u.state==="paused"){setTimeout(function(){S(m)},1e3);return}if(u.state!=="stopped"){if(m>=u.recordingDuration){p(u.onRecordingStopped);return}m+=1e3,setTimeout(function(){S(m)},1e3)}}function E(m){u&&(u.state=m,typeof u.onStateChanged.call=="function"?u.onStateChanged.call(u,m):u.onStateChanged(m))}var T='It seems that recorder is destroyed or "startRecording" is not invoked for '+r.type+" recorder.";function O(){r.disableLogs!==!0&&console.warn(T)}var L,G={startRecording:h,stopRecording:p,pauseRecording:_,resumeRecording:l,initRecorder:b,setRecordingDuration:function(m,P){if(typeof m>"u")throw"recordingDuration is required.";if(typeof m!="number")throw"recordingDuration must be a number.";return u.recordingDuration=m,u.onRecordingStopped=P||function(){},{onRecordingStopped:function(V){u.onRecordingStopped=V}}},clearRecordedData:function(){if(!L){O();return}L.clearRecordedData(),r.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!L){O();return}return L.blob},getDataURL:U,toURL:function(){if(!L){O();return}return y.createObjectURL(L.blob)},getInternalRecorder:function(){return L},save:function(m){if(!L){O();return}re(L.blob,m)},getFromDisk:function(m){if(!L){O();return}t.getFromDisk(r.type,m)},setAdvertisementArray:function(m){r.advertisement=[];for(var P=m.length,V=0;V<P;V++)r.advertisement.push({duration:V,image:m[V]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){u.state==="recording"&&!r.disableLogs&&console.warn("Stop an active recorder."),L&&typeof L.clearRecordedData=="function"&&L.clearRecordedData(),L=null,E("inactive"),u.blob=null},onStateChanged:function(m){r.disableLogs||console.log("Recorder state changed:",m)},state:"inactive",getState:function(){return u.state},destroy:function(){var m=r.disableLogs;r={disableLogs:!0},u.reset(),E("destroyed"),G=u=null,A.AudioContextConstructor&&(A.AudioContextConstructor.close(),A.AudioContextConstructor=null),r.disableLogs=m,r.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return u=G,G;for(var K in G)this[K]=G[K];return u=this,G}t.version="5.6.2",e.exports=t,t.getFromDisk=function(o,r){if(!r)throw"callback is mandatory.";console.log("Getting recorded "+(o==="all"?"blobs":o+" blob ")+" from disk!"),ae.Fetch(function(u,h){o!=="all"&&h===o+"Blob"&&r&&r(u),o==="all"&&r&&r(u,h.replace("Blob",""))})},t.writeToDisk=function(o){console.log("Writing recorded blob(s) to disk!"),o=o||{},o.audio&&o.video&&o.gif?o.audio.getDataURL(function(r){o.video.getDataURL(function(u){o.gif.getDataURL(function(h){ae.Store({audioBlob:r,videoBlob:u,gifBlob:h})})})}):o.audio&&o.video?o.audio.getDataURL(function(r){o.video.getDataURL(function(u){ae.Store({audioBlob:r,videoBlob:u})})}):o.audio&&o.gif?o.audio.getDataURL(function(r){o.gif.getDataURL(function(u){ae.Store({audioBlob:r,gifBlob:u})})}):o.video&&o.gif?o.video.getDataURL(function(r){o.gif.getDataURL(function(u){ae.Store({videoBlob:r,gifBlob:u})})}):o.audio?o.audio.getDataURL(function(r){ae.Store({audioBlob:r})}):o.video?o.video.getDataURL(function(r){ae.Store({videoBlob:r})}):o.gif&&o.gif.getDataURL(function(r){ae.Store({gifBlob:r})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function n(o,r){return!r.recorderType&&!r.type&&(r.audio&&r.video?r.type="video":r.audio&&!r.video&&(r.type="audio")),r.recorderType&&!r.type&&(r.recorderType===me||r.recorderType===ce||typeof Se<"u"&&r.recorderType===Se?r.type="video":r.recorderType===_e?r.type="gif":r.recorderType===J?r.type="audio":r.recorderType===z&&(F(o,"audio").length&&F(o,"video").length||!F(o,"audio").length&&F(o,"video").length?r.type="video":F(o,"audio").length&&!F(o,"video").length&&(r.type="audio"))),typeof z<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(r.mimeType||(r.mimeType="video/webm"),r.type||(r.type=r.mimeType.split("/")[0]),r.bitsPerSecond),r.type||(r.mimeType&&(r.type=r.mimeType.split("/")[0]),r.type||(r.type="audio")),r}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function i(o,r){var u;return(M||x||w)&&(u=J),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!M&&(u=z),r.type==="video"&&(M||w)&&(u=me,typeof Se<"u"&&typeof ReadableStream<"u"&&(u=Se)),r.type==="gif"&&(u=_e),r.type==="canvas"&&(u=ce),N()&&u!==ce&&u!==_e&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(F(o,"video").length||F(o,"audio").length)&&(r.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(u=z):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(u=z)),o instanceof Array&&o.length&&(u=He),r.recorderType&&(u=r.recorderType),!r.disableLogs&&u&&u.name&&console.log("Using recorderType:",u.name||u.constructor.name),!u&&$&&(u=z),u}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function a(o){this.addStream=function(r){r&&(o=r)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var r=this.mediaType,u,h=this.mimeType||{audio:null,video:null,gif:null};if(typeof r.audio!="function"&&N()&&!F(o,"audio").length&&(r.audio=!1),typeof r.video!="function"&&N()&&!F(o,"video").length&&(r.video=!1),typeof r.gif!="function"&&N()&&!F(o,"video").length&&(r.gif=!1),!r.audio&&!r.video&&!r.gif)throw"MediaStream must have either audio or video tracks.";if(r.audio&&(u=null,typeof r.audio=="function"&&(u=r.audio),this.audioRecorder=new t(o,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:u,mimeType:h.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),r.video||this.audioRecorder.startRecording()),r.video){u=null,typeof r.video=="function"&&(u=r.video);var b=o;if(N()&&r.audio&&typeof r.audio=="function"){var p=F(o,"video")[0];D?(b=new W,b.addTrack(p),u&&u===me&&(u=z)):(b=new W,b.addTrack(p))}this.videoRecorder=new t(b,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:u,mimeType:h.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),r.audio||this.videoRecorder.startRecording()}if(r.audio&&r.video){var _=this,l=N()===!0;(r.audio instanceof J&&r.video||r.audio!==!0&&r.video!==!0&&r.audio!==r.video)&&(l=!1),l===!0?(_.audioRecorder=null,_.videoRecorder.startRecording()):_.videoRecorder.initRecorder(function(){_.audioRecorder.initRecorder(function(){_.videoRecorder.startRecording(),_.audioRecorder.startRecording()})})}r.gif&&(u=null,typeof r.gif=="function"&&(u=r.gif),this.gifRecorder=new t(o,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:u,mimeType:h.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(r){r=r||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(u){r(u,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(u){r(u,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(u){r(u,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(r){var u={};return this.audioRecorder&&(u.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(u.video=this.videoRecorder.getBlob()),this.gifRecorder&&(u.gif=this.gifRecorder.getBlob()),r&&r(u),u},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(r){this.getBlob(function(b){b.audio&&b.video?u(b.audio,function(p){u(b.video,function(_){r({audio:p,video:_})})}):b.audio?u(b.audio,function(p){r({audio:p})}):b.video&&u(b.video,function(p){r({video:p})})});function u(b,p){if(typeof Worker<"u"){var _=h(function(U){postMessage(new FileReaderSync().readAsDataURL(U))});_.onmessage=function(k){p(k.data)},_.postMessage(b)}else{var l=new FileReader;l.readAsDataURL(b),l.onload=function(k){p(k.target.result)}}}function h(b){var p=y.createObjectURL(new Blob([b.toString(),"this.onmessage =  function (eee) {"+b.name+"(eee.data);}"],{type:"application/javascript"})),_=new Worker(p),l;if(typeof y<"u")l=y;else if(typeof webkitURL<"u")l=webkitURL;else throw"Neither URL nor webkitURL detected.";return l.revokeObjectURL(p),_}},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(r){r=r||{audio:!0,video:!0,gif:!0},r.audio&&this.audioRecorder&&this.audioRecorder.save(typeof r.audio=="string"?r.audio:""),r.video&&this.videoRecorder&&this.videoRecorder.save(typeof r.video=="string"?r.video:""),r.gif&&this.gifRecorder&&this.gifRecorder.save(typeof r.gif=="string"?r.gif:"")}}a.getFromDisk=t.getFromDisk,a.writeToDisk=t.writeToDisk,typeof t<"u"&&(t.MRecordRTC=a);var s="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(o){o&&(typeof window<"u"||typeof oe>"u"||(oe.navigator={userAgent:s,getUserMedia:function(){}},oe.console||(oe.console={}),(typeof oe.console.log>"u"||typeof oe.console.error>"u")&&(oe.console.error=oe.console.log=oe.console.log||function(){console.log(arguments)}),typeof document>"u"&&(o.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var r={getContext:function(){return r},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return r},o.HTMLVideoElement=function(){}),typeof location>"u"&&(o.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(o.screen={width:0,height:0}),typeof y>"u"&&(o.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),o.window=oe))})(typeof oe<"u"?oe:null);var c=window.requestAnimationFrame;if(typeof c>"u"){if(typeof webkitRequestAnimationFrame<"u")c=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")c=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")c=msRequestAnimationFrame;else if(typeof c>"u"){var f=0;c=function(o,r){var u=new Date().getTime(),h=Math.max(0,16-(u-f)),b=setTimeout(function(){o(u+h)},h);return f=u+h,b}}}var v=window.cancelAnimationFrame;typeof v>"u"&&(typeof webkitCancelAnimationFrame<"u"?v=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?v=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?v=msCancelAnimationFrame:typeof v>"u"&&(v=function(o){clearTimeout(o)}));var g=window.AudioContext;typeof g>"u"&&(typeof webkitAudioContext<"u"&&(g=webkitAudioContext),typeof mozAudioContext<"u"&&(g=mozAudioContext));var y=window.URL;typeof y>"u"&&typeof webkitURL<"u"&&(y=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var x=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),w=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,D=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),M=!w&&!x&&!!navigator.webkitGetUserMedia||Y()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,$=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);$&&!M&&navigator.userAgent.indexOf("CriOS")!==-1&&($=!1,M=!0);var W=window.MediaStream;typeof W>"u"&&typeof webkitMediaStream<"u"&&(W=webkitMediaStream),typeof W<"u"&&typeof W.prototype.stop>"u"&&(W.prototype.stop=function(){this.getTracks().forEach(function(o){o.stop()})});function Q(o){var r=1e3,u=["Bytes","KB","MB","GB","TB"];if(o===0)return"0 Bytes";var h=parseInt(Math.floor(Math.log(o)/Math.log(r)),10);return(o/Math.pow(r,h)).toPrecision(3)+" "+u[h]}function re(o,r){if(!o)throw"Blob object is required.";if(!o.type)try{o.type="video/webm"}catch{}var u=(o.type||"video/webm").split("/")[1];if(u.indexOf(";")!==-1&&(u=u.split(";")[0]),r&&r.indexOf(".")!==-1){var h=r.split(".");r=h[0],u=h[1]}var b=(r||Math.round(Math.random()*9999999999)+888888888)+"."+u;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(o,b);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(o,b);var p=document.createElement("a");p.href=y.createObjectURL(o),p.download=b,p.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(p),typeof p.click=="function"?p.click():(p.target="_blank",p.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),y.revokeObjectURL(p.href)}function Y(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function F(o,r){return!o||!o.getTracks?[]:o.getTracks().filter(function(u){return u.kind===(r||"audio")})}function C(o,r){"srcObject"in r?r.srcObject=o:"mozSrcObject"in r?r.mozSrcObject=o:r.srcObject=o}function B(o,r){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var u=new EBML.Reader,h=new EBML.Decoder,b=EBML.tools,p=new FileReader;p.onload=function(_){var l=h.decode(this.result);l.forEach(function(E){u.read(E)}),u.stop();var k=b.makeMetadataSeekable(u.metadatas,u.duration,u.cues),U=this.result.slice(u.metadataSize),S=new Blob([k,U],{type:"video/webm"});r(S)},p.readAsArrayBuffer(o)}typeof t<"u"&&(t.invokeSaveAsDialog=re,t.getTracks=F,t.getSeekableBlob=B,t.bytesToSize=Q,t.isElectron=Y);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var A={};typeof g<"u"?A.AudioContext=g:typeof webkitAudioContext<"u"&&(A.AudioContext=webkitAudioContext),typeof t<"u"&&(t.Storage=A);function N(){if(D||$||x)return!0;var o=navigator.userAgent,r=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10),h,b;return(M||w)&&(h=o.indexOf("Chrome"),r=o.substring(h+7)),(b=r.indexOf(";"))!==-1&&(r=r.substring(0,b)),(b=r.indexOf(" "))!==-1&&(r=r.substring(0,b)),u=parseInt(""+r,10),isNaN(u)&&(r=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10)),u>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function z(o,r){var S=this;if(typeof o>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(r=r||{mimeType:"video/webm"},r.type==="audio"){if(F(o,"video").length&&F(o,"audio").length){var u;navigator.mozGetUserMedia?(u=new W,u.addTrack(F(o,"audio")[0])):u=new W(F(o,"audio")),o=u}(!r.mimeType||r.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(r.mimeType=M?"audio/webm":"audio/ogg"),r.mimeType&&r.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(r.mimeType="audio/ogg")}var h=[];this.getArrayOfBlobs=function(){return h},this.record=function(){S.blob=null,S.clearRecordedData(),S.timestamps=[],U=[],h=[];var E=r;r.disableLogs||console.log("Passing following config over MediaRecorder API.",E),l&&(l=null),M&&!N()&&(E="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&E.mimeType&&(MediaRecorder.isTypeSupported(E.mimeType)||(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",E.mimeType),E.mimeType=r.type==="audio"?"audio/webm":"video/webm"));try{l=new MediaRecorder(o,E),r.mimeType=E.mimeType}catch{l=new MediaRecorder(o)}E.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in l&&l.canRecordMimeType(E.mimeType)===!1&&(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",E.mimeType)),l.ondataavailable=function(T){if(T.data&&U.push("ondataavailable: "+Q(T.data.size)),typeof r.timeSlice=="number"){if(T.data&&T.data.size&&(h.push(T.data),b(),typeof r.ondataavailable=="function")){var O=r.getNativeBlob?T.data:new Blob([T.data],{type:p(E)});r.ondataavailable(O)}return}if(!T.data||!T.data.size||T.data.size<100||S.blob){S.recordingCallback&&(S.recordingCallback(new Blob([],{type:p(E)})),S.recordingCallback=null);return}S.blob=r.getNativeBlob?T.data:new Blob([T.data],{type:p(E)}),S.recordingCallback&&(S.recordingCallback(S.blob),S.recordingCallback=null)},l.onstart=function(){U.push("started")},l.onpause=function(){U.push("paused")},l.onresume=function(){U.push("resumed")},l.onstop=function(){U.push("stopped")},l.onerror=function(T){T&&(T.name||(T.name="UnknownError"),U.push("error: "+T),r.disableLogs||(T.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",T):T.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",E.mimeType,") is not supported.",T):T.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",T):T.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",T):T.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",T):T.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",T):T.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",T):console.error("MediaRecorder Error",T)),function(O){if(!S.manuallyStopped&&l&&l.state==="inactive"){delete r.timeslice,l.start(10*60*1e3);return}setTimeout(O,1e3)}(),l.state!=="inactive"&&l.state!=="stopped"&&l.stop())},typeof r.timeSlice=="number"?(b(),l.start(r.timeSlice)):l.start(36e5),r.initCallback&&r.initCallback()},this.timestamps=[];function b(){S.timestamps.push(new Date().getTime()),typeof r.onTimeStamp=="function"&&r.onTimeStamp(S.timestamps[S.timestamps.length-1],S.timestamps)}function p(E){return l&&l.mimeType?l.mimeType:E.mimeType||"video/webm"}this.stop=function(E){E=E||function(){},S.manuallyStopped=!0,l&&(this.recordingCallback=E,l.state==="recording"&&l.stop(),typeof r.timeSlice=="number"&&setTimeout(function(){S.blob=new Blob(h,{type:p(r)}),S.recordingCallback(S.blob)},100))},this.pause=function(){l&&l.state==="recording"&&l.pause()},this.resume=function(){l&&l.state==="paused"&&l.resume()},this.clearRecordedData=function(){l&&l.state==="recording"&&S.stop(_),_()};function _(){h=[],l=null,S.timestamps=[]}var l;this.getInternalRecorder=function(){return l};function k(){if("active"in o){if(!o.active)return!1}else if("ended"in o&&o.ended)return!1;return!0}this.blob=null,this.getState=function(){return l&&l.state||"inactive"};var U=[];this.getAllStates=function(){return U},typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!1);var S=this;(function E(){if(!(!l||r.checkForInactiveTracks===!1)){if(k()===!1){r.disableLogs||console.log("MediaStream seems stopped."),S.stop();return}setTimeout(E,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MediaStreamRecorder=z);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function J(o,r){if(!F(o,"audio").length)throw"Your stream has no audio tracks.";r=r||{};var u=this,h=[],b=[],p=!1,_=0,l,k=2,U=r.desiredSampRate;r.leftChannel===!0&&(k=1),r.numberOfAudioChannels===1&&(k=1),(!k||k<1)&&(k=2),r.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+k),typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!0);function S(){if(r.checkForInactiveTracks===!1)return!0;if("active"in o){if(!o.active)return!1}else if("ended"in o&&o.ended)return!1;return!0}this.record=function(){if(S()===!1)throw"Please make sure MediaStream is active.";V(),R=P=!1,p=!0,typeof r.timeSlice<"u"&&X()};function E(H,de){function ve(le,Tt){var Ue=le.numberOfAudioChannels,Te=le.leftBuffers.slice(0),Ke=le.rightBuffers.slice(0),Ae=le.sampleRate,Qe=le.internalInterleavedLength,Pe=le.desiredSampRate;Ue===2&&(Te=yr(Te,Qe),Ke=yr(Ke,Qe),Pe&&(Te=Ct(Te,Pe,Ae),Ke=Ct(Ke,Pe,Ae))),Ue===1&&(Te=yr(Te,Qe),Pe&&(Te=Ct(Te,Pe,Ae))),Pe&&(Ae=Pe);function Ct(fe,je,Ee){var Me=Math.round(fe.length*(je/Ee)),ge=[],Je=Number((fe.length-1)/(Me-1));ge[0]=fe[0];for(var lt=1;lt<Me-1;lt++){var xr=lt*Je,rn=Number(Math.floor(xr)).toFixed(),vi=Number(Math.ceil(xr)).toFixed(),hi=xr-rn;ge[lt]=ui(fe[rn],fe[vi],hi)}return ge[Me-1]=fe[fe.length-1],ge}function ui(fe,je,Ee){return fe+(je-fe)*Ee}function yr(fe,je){for(var Ee=new Float64Array(je),Me=0,ge=fe.length,Je=0;Je<ge;Je++){var lt=fe[Je];Ee.set(lt,Me),Me+=lt.length}return Ee}function li(fe,je){for(var Ee=fe.length+je.length,Me=new Float64Array(Ee),ge=0,Je=0;Je<Ee;)Me[Je++]=fe[ge],Me[Je++]=je[ge],ge++;return Me}function Vt(fe,je,Ee){for(var Me=Ee.length,ge=0;ge<Me;ge++)fe.setUint8(je+ge,Ee.charCodeAt(ge))}var zt;Ue===2&&(zt=li(Te,Ke)),Ue===1&&(zt=Te);var Gt=zt.length,fi=44+Gt*2,_r=new ArrayBuffer(fi),he=new DataView(_r);Vt(he,0,"RIFF"),he.setUint32(4,36+Gt*2,!0),Vt(he,8,"WAVE"),Vt(he,12,"fmt "),he.setUint32(16,16,!0),he.setUint16(20,1,!0),he.setUint16(22,Ue,!0),he.setUint32(24,Ae,!0),he.setUint32(28,Ae*Ue*2,!0),he.setUint16(32,Ue*2,!0),he.setUint16(34,16,!0),Vt(he,36,"data"),he.setUint32(40,Gt*2,!0);for(var di=Gt,tn=44,ci=1,Rr=0;Rr<di;Rr++)he.setInt16(tn,zt[Rr]*(32767*ci),!0),tn+=2;if(Tt)return Tt({buffer:_r,view:he});postMessage({buffer:_r,view:he})}if(H.noWorker){ve(H,function(le){de(le.buffer,le.view)});return}var Ye=T(ve);Ye.onmessage=function(le){de(le.data.buffer,le.data.view),y.revokeObjectURL(Ye.workerURL),Ye.terminate()},Ye.postMessage(H)}function T(H){var de=y.createObjectURL(new Blob([H.toString(),";this.onmessage =  function (eee) {"+H.name+"(eee.data);}"],{type:"application/javascript"})),ve=new Worker(de);return ve.workerURL=de,ve}this.stop=function(H){H=H||function(){},p=!1,E({desiredSampRate:U,sampleRate:m,numberOfAudioChannels:k,internalInterleavedLength:_,leftBuffers:h,rightBuffers:k===1?[]:b,noWorker:r.noWorker},function(de,ve){u.blob=new Blob([ve],{type:"audio/wav"}),u.buffer=new ArrayBuffer(ve.buffer.byteLength),u.view=ve,u.sampleRate=U||m,u.bufferSize=K,u.length=_,R=!1,H&&H(u.blob)})},typeof t.Storage>"u"&&(t.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!t.Storage.AudioContextConstructor||t.Storage.AudioContextConstructor.state==="closed")&&(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var O=t.Storage.AudioContextConstructor,L=O.createMediaStreamSource(o),G=[0,256,512,1024,2048,4096,8192,16384],K=typeof r.bufferSize>"u"?4096:r.bufferSize;if(G.indexOf(K)===-1&&(r.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(G,null,"	"))),O.createJavaScriptNode)l=O.createJavaScriptNode(K,k,k);else if(O.createScriptProcessor)l=O.createScriptProcessor(K,k,k);else throw"WebAudio API has no support on this browser.";L.connect(l),r.bufferSize||(K=l.bufferSize);var m=typeof r.sampleRate<"u"?r.sampleRate:O.sampleRate||44100;(m<22050||m>96e3)&&(r.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),r.disableLogs||r.desiredSampRate&&console.log("Desired sample-rate: "+r.desiredSampRate);var P=!1;this.pause=function(){P=!0},this.resume=function(){if(S()===!1)throw"Please make sure MediaStream is active.";if(!p){r.disableLogs||console.log("Seems recording has been restarted."),this.record();return}P=!1},this.clearRecordedData=function(){r.checkForInactiveTracks=!1,p&&this.stop(d),d()};function V(){h=[],b=[],_=0,R=!1,p=!1,P=!1,O=null,u.leftchannel=h,u.rightchannel=b,u.numberOfAudioChannels=k,u.desiredSampRate=U,u.sampleRate=m,u.recordingLength=_,q={left:[],right:[],recordingLength:0}}function d(){l&&(l.onaudioprocess=null,l.disconnect(),l=null),L&&(L.disconnect(),L=null),V()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var R=!1;function j(H){if(!P){if(S()===!1&&(r.disableLogs||console.log("MediaStream seems stopped."),l.disconnect(),p=!1),!p){L&&(L.disconnect(),L=null);return}R||(R=!0,r.onAudioProcessStarted&&r.onAudioProcessStarted(),r.initCallback&&r.initCallback());var de=H.inputBuffer.getChannelData(0),ve=new Float32Array(de);if(h.push(ve),k===2){var Ye=H.inputBuffer.getChannelData(1),le=new Float32Array(Ye);b.push(le)}_+=K,u.recordingLength=_,typeof r.timeSlice<"u"&&(q.recordingLength+=K,q.left.push(ve),k===2&&q.right.push(le))}}l.onaudioprocess=j,O.createMediaStreamDestination?l.connect(O.createMediaStreamDestination()):l.connect(O.destination),this.leftchannel=h,this.rightchannel=b,this.numberOfAudioChannels=k,this.desiredSampRate=U,this.sampleRate=m,u.recordingLength=_;var q={left:[],right:[],recordingLength:0};function X(){!p||typeof r.ondataavailable!="function"||typeof r.timeSlice>"u"||(q.left.length?(E({desiredSampRate:U,sampleRate:m,numberOfAudioChannels:k,internalInterleavedLength:q.recordingLength,leftBuffers:q.left,rightBuffers:k===1?[]:q.right},function(H,de){var ve=new Blob([de],{type:"audio/wav"});r.ondataavailable(ve),setTimeout(X,r.timeSlice)}),q={left:[],right:[],recordingLength:0}):setTimeout(X,r.timeSlice))}}typeof t<"u"&&(t.StereoAudioRecorder=J);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function ce(o,r){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";r=r||{},r.frameInterval||(r.frameInterval=10);var u=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(G){G in document.createElement("canvas")&&(u=!0)});var h=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,b=50,p=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);h&&p&&p[2]&&(b=parseInt(p[2],10)),h&&b<52&&(u=!1),r.useWhammyRecorder&&(u=!1);var _,l;if(u)if(r.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),o instanceof HTMLCanvasElement)_=o;else if(o instanceof CanvasRenderingContext2D)_=o.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(r.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var k;this.record=function(){if(k=!0,u&&!r.useWhammyRecorder){var G;"captureStream"in _?G=_.captureStream(25):"mozCaptureStream"in _?G=_.mozCaptureStream(25):"webkitCaptureStream"in _&&(G=_.webkitCaptureStream(25));try{var K=new W;K.addTrack(F(G,"video")[0]),G=K}catch{}if(!G)throw"captureStream API are NOT available.";l=new z(G,{mimeType:r.mimeType||"video/webm"}),l.record()}else L.frames=[],O=new Date().getTime(),T();r.initCallback&&r.initCallback()},this.getWebPImages=function(G){if(o.nodeName.toLowerCase()!=="canvas"){G();return}var K=L.frames.length;L.frames.forEach(function(m,P){var V=K-P;r.disableLogs||console.log(V+"/"+K+" frames remaining"),r.onEncodingCallback&&r.onEncodingCallback(V,K);var d=m.image.toDataURL("image/webp",1);L.frames[P].image=d}),r.disableLogs||console.log("Generating WebM"),G()},this.stop=function(G){k=!1;var K=this;if(u&&l){l.stop(G);return}this.getWebPImages(function(){L.compile(function(m){r.disableLogs||console.log("Recording finished!"),K.blob=m,K.blob.forEach&&(K.blob=new Blob([],{type:"video/webm"})),G&&G(K.blob),L.frames=[]})})};var U=!1;this.pause=function(){if(U=!0,l instanceof z){l.pause();return}},this.resume=function(){if(U=!1,l instanceof z){l.resume();return}k||this.record()},this.clearRecordedData=function(){k&&this.stop(S),S()};function S(){L.frames=[],k=!1,U=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function E(){var G=document.createElement("canvas"),K=G.getContext("2d");return G.width=o.width,G.height=o.height,K.drawImage(o,0,0),G}function T(){if(U)return O=new Date().getTime(),setTimeout(T,500);if(o.nodeName.toLowerCase()==="canvas"){var G=new Date().getTime()-O;O=new Date().getTime(),L.frames.push({image:E(),duration:G}),k&&setTimeout(T,r.frameInterval);return}html2canvas(o,{grabMouse:typeof r.showMousePointer>"u"||r.showMousePointer,onrendered:function(K){var m=new Date().getTime()-O;if(!m)return setTimeout(T,r.frameInterval);O=new Date().getTime(),L.frames.push({image:K.toDataURL("image/webp",1),duration:m}),k&&setTimeout(T,r.frameInterval)}})}var O=new Date().getTime(),L=new $e.Video(100)}typeof t<"u"&&(t.CanvasRecorder=ce);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function me(o,r){r=r||{},r.frameInterval||(r.frameInterval=10),r.disableLogs||console.log("Using frames-interval:",r.frameInterval),this.record=function(){r.width||(r.width=320),r.height||(r.height=240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),k.width=r.canvas.width||320,k.height=r.canvas.height||240,U=k.getContext("2d"),r.video&&r.video instanceof HTMLVideoElement?(S=r.video.cloneNode(),r.initCallback&&r.initCallback()):(S=document.createElement("video"),C(o,S),S.onloadedmetadata=function(){r.initCallback&&r.initCallback()},S.width=r.video.width,S.height=r.video.height),S.muted=!0,S.play(),E=new Date().getTime(),T=new $e.Video,r.disableLogs||(console.log("canvas resolutions",k.width,"*",k.height),console.log("video width/height",S.width||k.width,"*",S.height||k.height)),u(r.frameInterval)};function u(O){O=typeof O<"u"?O:10;var L=new Date().getTime()-E;if(!L)return setTimeout(u,O,O);if(_)return E=new Date().getTime(),setTimeout(u,100);E=new Date().getTime(),S.paused&&S.play(),U.drawImage(S,0,0,k.width,k.height),T.frames.push({duration:L,image:k.toDataURL("image/webp")}),p||setTimeout(u,O,O)}function h(O){var L=-1,G=O.length;(function K(){if(L++,L===G){O.callback();return}setTimeout(function(){O.functionToLoop(K,L)},1)})()}function b(O,L,G,K,m){var P=document.createElement("canvas");P.width=k.width,P.height=k.height;var V=P.getContext("2d"),d=[],R=O.length,j={r:0,g:0,b:0},q=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),X=0,H=0,de=!1;h({length:R,functionToLoop:function(ve,Ye){var le,Tt,Ue,Te=function(){!de&&Ue-le<=Ue*H||(de=!0,d.push(O[Ye])),ve()};if(de)Te();else{var Ke=new Image;Ke.onload=function(){V.drawImage(Ke,0,0,k.width,k.height);var Ae=V.getImageData(0,0,k.width,k.height);le=0,Tt=Ae.data.length,Ue=Ae.data.length/4;for(var Qe=0;Qe<Tt;Qe+=4){var Pe={r:Ae.data[Qe],g:Ae.data[Qe+1],b:Ae.data[Qe+2]},Ct=Math.sqrt(Math.pow(Pe.r-j.r,2)+Math.pow(Pe.g-j.g,2)+Math.pow(Pe.b-j.b,2));Ct<=q*X&&le++}Te()},Ke.src=O[Ye].image}},callback:function(){d=d.concat(O.slice(R)),d.length<=0&&d.push(O[O.length-1]),m(d)}})}var p=!1;this.stop=function(O){O=O||function(){},p=!0;var L=this;setTimeout(function(){b(T.frames,-1,null,null,function(G){T.frames=G,r.advertisement&&r.advertisement.length&&(T.frames=r.advertisement.concat(T.frames)),T.compile(function(K){L.blob=K,L.blob.forEach&&(L.blob=new Blob([],{type:"video/webm"})),O&&O(L.blob)})})},10)};var _=!1;this.pause=function(){_=!0},this.resume=function(){_=!1,p&&this.record()},this.clearRecordedData=function(){p||this.stop(l),l()};function l(){T.frames=[],p=!0,_=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var k=document.createElement("canvas"),U=k.getContext("2d"),S,E,T}typeof t<"u"&&(t.WhammyRecorder=me);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var $e=function(){function o(h){this.frames=[],this.duration=h||1,this.quality=.8}o.prototype.add=function(h,b){if("canvas"in h&&(h=h.canvas),"toDataURL"in h&&(h=h.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(h))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:h,duration:b||this.duration})};function r(h){var b=y.createObjectURL(new Blob([h.toString(),"this.onmessage =  function (eee) {"+h.name+"(eee.data);}"],{type:"application/javascript"})),p=new Worker(b);return y.revokeObjectURL(b),p}function u(h){function b(m){var P=_(m);if(!P)return[];for(var V=3e4,d=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:G(P.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:P.width,id:176},{data:P.height,id:186}]}]}]}]}],R=0,j=0;R<m.length;){var q=[],X=0;do q.push(m[R]),X+=m[R].duration,R++;while(R<m.length&&X<V);var H=0,de={id:524531317,data:p(j,H,q)};d[1].data.push(de),j+=X}return S(d)}function p(m,P,V){return[{data:m,id:231}].concat(V.map(function(d){var R=E({frame:d.data.slice(4),trackNum:1,timecode:Math.round(P)});return P+=d.duration,{data:R,id:163}}))}function _(m){if(!m[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var P=m[0].width,V=m[0].height,d=m[0].duration,R=1;R<m.length;R++)d+=m[R].duration;return{duration:d,width:P,height:V}}function l(m){for(var P=[];m>0;)P.push(m&255),m=m>>8;return new Uint8Array(P.reverse())}function k(m){return new Uint8Array(m.split("").map(function(P){return P.charCodeAt(0)}))}function U(m){var P=[],V=m.length%8?new Array(9-m.length%8).join("0"):"";m=V+m;for(var d=0;d<m.length;d+=8)P.push(parseInt(m.substr(d,8),2));return new Uint8Array(P)}function S(m){for(var P=[],V=0;V<m.length;V++){var d=m[V].data;typeof d=="object"&&(d=S(d)),typeof d=="number"&&(d=U(d.toString(2))),typeof d=="string"&&(d=k(d));var R=d.size||d.byteLength||d.length,j=Math.ceil(Math.ceil(Math.log(R)/Math.log(2))/8),q=R.toString(2),X=new Array(j*7+7+1-q.length).join("0")+q,H=new Array(j).join("0")+"1"+X;P.push(l(m[V].id)),P.push(U(H)),P.push(d)}return new Blob(P,{type:"video/webm"})}function E(m){var P=0;P|=128;var V=[m.trackNum|128,m.timecode>>8,m.timecode&255,P].map(function(d){return String.fromCharCode(d)}).join("")+m.frame;return V}function T(m){for(var P=m.RIFF[0].WEBP[0],V=P.indexOf("*"),d=0,R=[];d<4;d++)R[d]=P.charCodeAt(V+3+d);var j,q,X;return X=R[1]<<8|R[0],j=X&16383,X=R[3]<<8|R[2],q=X&16383,{width:j,height:q,data:P,riff:m}}function O(m,P){return parseInt(m.substr(P+4,4).split("").map(function(V){var d=V.charCodeAt(0).toString(2);return new Array(8-d.length+1).join("0")+d}).join(""),2)}function L(m){for(var P=0,V={};P<m.length;){var d=m.substr(P,4),R=O(m,P),j=m.substr(P+4+4,R);P+=8+R,V[d]=V[d]||[],d==="RIFF"||d==="LIST"?V[d].push(L(j)):V[d].push(j)}return V}function G(m){return[].slice.call(new Uint8Array(new Float64Array([m]).buffer),0).map(function(P){return String.fromCharCode(P)}).reverse().join("")}var K=new b(h.map(function(m){var P=T(L(atob(m.image.slice(23))));return P.duration=m.duration,P}));postMessage(K)}return o.prototype.compile=function(h){var b=r(u);b.onmessage=function(p){if(p.data.error){console.error(p.data.error);return}h(p.data)},b.postMessage(this.frames)},{Video:o}}();typeof t<"u"&&(t.Whammy=$e);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var ae={init:function(){var o=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var r=1,u=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),h,b=indexedDB.open(u,r);function p(l){l.createObjectStore(o.dataStoreName)}function _(){var l=h.transaction([o.dataStoreName],"readwrite");o.videoBlob&&l.objectStore(o.dataStoreName).put(o.videoBlob,"videoBlob"),o.gifBlob&&l.objectStore(o.dataStoreName).put(o.gifBlob,"gifBlob"),o.audioBlob&&l.objectStore(o.dataStoreName).put(o.audioBlob,"audioBlob");function k(U){l.objectStore(o.dataStoreName).get(U).onsuccess=function(S){o.callback&&o.callback(S.target.result,U)}}k("audioBlob"),k("videoBlob"),k("gifBlob")}b.onerror=o.onError,b.onsuccess=function(){if(h=b.result,h.onerror=o.onError,h.setVersion)if(h.version!==r){var l=h.setVersion(r);l.onsuccess=function(){p(h),_()}}else _();else _()},b.onupgradeneeded=function(l){p(l.target.result)}},Fetch:function(o){return this.callback=o,this.init(),this},Store:function(o){return this.audioBlob=o.audioBlob,this.videoBlob=o.videoBlob,this.gifBlob=o.gifBlob,this.init(),this},onError:function(o){console.error(JSON.stringify(o,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof t<"u"&&(t.DiskStorage=ae);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function _e(o,r){if(typeof GIFEncoder>"u"){var u=document.createElement("script");u.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(u)}r=r||{};var h=o instanceof CanvasRenderingContext2D||o instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(O.record,1e3);return}if(!k){setTimeout(O.record,1e3);return}h||(r.width||(r.width=U.offsetWidth||320),r.height||(r.height=U.offsetHeight||240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),_.width=r.canvas.width||320,_.height=r.canvas.height||240,U.width=r.video.width||320,U.height=r.video.height||240),T=new GIFEncoder,T.setRepeat(0),T.setDelay(r.frameRate||200),T.setQuality(r.quality||10),T.start(),typeof r.onGifRecordingStarted=="function"&&r.onGifRecordingStarted();function L(G){if(O.clearedRecordedData!==!0){if(b)return setTimeout(function(){L(G)},100);S=c(L),typeof E===void 0&&(E=G),!(G-E<90)&&(!h&&U.paused&&U.play(),h||l.drawImage(U,0,0,_.width,_.height),r.onGifPreview&&r.onGifPreview(_.toDataURL("image/png")),T.addFrame(l),E=G)}}S=c(L),r.initCallback&&r.initCallback()},this.stop=function(L){L=L||function(){},S&&v(S),this.blob=new Blob([new Uint8Array(T.stream().bin)],{type:"image/gif"}),L(this.blob),T.stream().bin=[]};var b=!1;this.pause=function(){b=!0},this.resume=function(){b=!1},this.clearRecordedData=function(){O.clearedRecordedData=!0,p()};function p(){T&&(T.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var _=document.createElement("canvas"),l=_.getContext("2d");h&&(o instanceof CanvasRenderingContext2D?(l=o,_=l.canvas):o instanceof HTMLCanvasElement&&(l=o.getContext("2d"),_=o));var k=!0;if(!h){var U=document.createElement("video");U.muted=!0,U.autoplay=!0,U.playsInline=!0,k=!1,U.onloadedmetadata=function(){k=!0},C(o,U),U.play()}var S=null,E,T,O=this}typeof t<"u"&&(t.GifRecorder=_e);function Le(o,r){var u="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(d){typeof t<"u"||d&&(typeof window<"u"||typeof oe>"u"||(oe.navigator={userAgent:u,getUserMedia:function(){}},oe.console||(oe.console={}),(typeof oe.console.log>"u"||typeof oe.console.error>"u")&&(oe.console.error=oe.console.log=oe.console.log||function(){console.log(arguments)}),typeof document>"u"&&(d.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var R={getContext:function(){return R},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return R},d.HTMLVideoElement=function(){}),typeof location>"u"&&(d.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(d.screen={width:0,height:0}),typeof U>"u"&&(d.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),d.window=oe))})(typeof oe<"u"?oe:null),r=r||"multi-streams-mixer";var h=[],b=!1,p=document.createElement("canvas"),_=p.getContext("2d");p.style.opacity=0,p.style.position="absolute",p.style.zIndex=-1,p.style.top="-1000em",p.style.left="-1000em",p.className=r,(document.body||document.documentElement).appendChild(p),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var l=this,k=window.AudioContext;typeof k>"u"&&(typeof webkitAudioContext<"u"&&(k=webkitAudioContext),typeof mozAudioContext<"u"&&(k=mozAudioContext));var U=window.URL;typeof U>"u"&&typeof webkitURL<"u"&&(U=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var S=window.MediaStream;typeof S>"u"&&typeof webkitMediaStream<"u"&&(S=webkitMediaStream),typeof S<"u"&&typeof S.prototype.stop>"u"&&(S.prototype.stop=function(){this.getTracks().forEach(function(d){d.stop()})});var E={};typeof k<"u"?E.AudioContext=k:typeof webkitAudioContext<"u"&&(E.AudioContext=webkitAudioContext);function T(d,R){"srcObject"in R?R.srcObject=d:"mozSrcObject"in R?R.mozSrcObject=d:R.srcObject=d}this.startDrawingFrames=function(){O()};function O(){if(!b){var d=h.length,R=!1,j=[];if(h.forEach(function(X){X.stream||(X.stream={}),X.stream.fullcanvas?R=X:j.push(X)}),R)p.width=R.stream.width,p.height=R.stream.height;else if(j.length){p.width=d>1?j[0].width*2:j[0].width;var q=1;(d===3||d===4)&&(q=2),(d===5||d===6)&&(q=3),(d===7||d===8)&&(q=4),(d===9||d===10)&&(q=5),p.height=j[0].height*q}else p.width=l.width||360,p.height=l.height||240;R&&R instanceof HTMLVideoElement&&L(R),j.forEach(function(X,H){L(X,H)}),setTimeout(O,l.frameInterval)}}function L(d,R){if(!b){var j=0,q=0,X=d.width,H=d.height;R===1&&(j=d.width),R===2&&(q=d.height),R===3&&(j=d.width,q=d.height),R===4&&(q=d.height*2),R===5&&(j=d.width,q=d.height*2),R===6&&(q=d.height*3),R===7&&(j=d.width,q=d.height*3),typeof d.stream.left<"u"&&(j=d.stream.left),typeof d.stream.top<"u"&&(q=d.stream.top),typeof d.stream.width<"u"&&(X=d.stream.width),typeof d.stream.height<"u"&&(H=d.stream.height),_.drawImage(d,j,q,X,H),typeof d.stream.onRender=="function"&&d.stream.onRender(_,j,q,X,H,R)}}function G(){b=!1;var d=K(),R=m();return R&&R.getTracks().filter(function(j){return j.kind==="audio"}).forEach(function(j){d.addTrack(j)}),o.forEach(function(j){j.fullcanvas}),d}function K(){V();var d;"captureStream"in p?d=p.captureStream():"mozCaptureStream"in p?d=p.mozCaptureStream():l.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var R=new S;return d.getTracks().filter(function(j){return j.kind==="video"}).forEach(function(j){R.addTrack(j)}),p.stream=R,R}function m(){E.AudioContextConstructor||(E.AudioContextConstructor=new E.AudioContext),l.audioContext=E.AudioContextConstructor,l.audioSources=[],l.useGainNode===!0&&(l.gainNode=l.audioContext.createGain(),l.gainNode.connect(l.audioContext.destination),l.gainNode.gain.value=0);var d=0;if(o.forEach(function(R){if(R.getTracks().filter(function(q){return q.kind==="audio"}).length){d++;var j=l.audioContext.createMediaStreamSource(R);l.useGainNode===!0&&j.connect(l.gainNode),l.audioSources.push(j)}}),!!d)return l.audioDestination=l.audioContext.createMediaStreamDestination(),l.audioSources.forEach(function(R){R.connect(l.audioDestination)}),l.audioDestination.stream}function P(d){var R=document.createElement("video");return T(d,R),R.className=r,R.muted=!0,R.volume=0,R.width=d.width||l.width||360,R.height=d.height||l.height||240,R.play(),R}this.appendStreams=function(d){if(!d)throw"First parameter is required.";d instanceof Array||(d=[d]),d.forEach(function(R){var j=new S;if(R.getTracks().filter(function(H){return H.kind==="video"}).length){var q=P(R);q.stream=R,h.push(q),j.addTrack(R.getTracks().filter(function(H){return H.kind==="video"})[0])}if(R.getTracks().filter(function(H){return H.kind==="audio"}).length){var X=l.audioContext.createMediaStreamSource(R);l.audioDestination=l.audioContext.createMediaStreamDestination(),X.connect(l.audioDestination),j.addTrack(l.audioDestination.stream.getTracks().filter(function(H){return H.kind==="audio"})[0])}o.push(j)})},this.releaseStreams=function(){h=[],b=!0,l.gainNode&&(l.gainNode.disconnect(),l.gainNode=null),l.audioSources.length&&(l.audioSources.forEach(function(d){d.disconnect()}),l.audioSources=[]),l.audioDestination&&(l.audioDestination.disconnect(),l.audioDestination=null),l.audioContext&&l.audioContext.close(),l.audioContext=null,_.clearRect(0,0,p.width,p.height),p.stream&&(p.stream.stop(),p.stream=null)},this.resetVideoStreams=function(d){d&&!(d instanceof Array)&&(d=[d]),V(d)};function V(d){h=[],d=d||o,d.forEach(function(R){if(R.getTracks().filter(function(q){return q.kind==="video"}).length){var j=P(R);j.stream=R,h.push(j)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=G}typeof t>"u"&&(e.exports=Le);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function He(o,r){o=o||[];var u=this,h,b;r=r||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},r.frameInterval||(r.frameInterval=10),r.video||(r.video={}),r.video.width||(r.video.width=360),r.video.height||(r.video.height=240),this.record=function(){h=new Le(o,r.elementClass||"multi-streams-mixer"),p().length&&(h.frameInterval=r.frameInterval||10,h.width=r.video.width||360,h.height=r.video.height||240,h.startDrawingFrames()),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(h.getMixedStream()),b=new z(h.getMixedStream(),r),b.record()};function p(){var _=[];return o.forEach(function(l){F(l,"video").forEach(function(k){_.push(k)})}),_}this.stop=function(_){b&&b.stop(function(l){u.blob=l,_(l),u.clearRecordedData()})},this.pause=function(){b&&b.pause()},this.resume=function(){b&&b.resume()},this.clearRecordedData=function(){b&&(b.clearRecordedData(),b=null),h&&(h.releaseStreams(),h=null)},this.addStreams=function(_){if(!_)throw"First parameter is required.";_ instanceof Array||(_=[_]),o.concat(_),!(!b||!h)&&(h.appendStreams(_),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(h.getMixedStream()))},this.resetVideoStreams=function(_){h&&(_&&!(_ instanceof Array)&&(_=[_]),h.resetVideoStreams(_))},this.getMixer=function(){return h},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MultiStreamRecorder=He);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function xe(o,r){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof o>"u")throw'First argument "MediaStream" is required.';var u=this;u.recordRTC=new t(o,r),this.startRecording=function(){return new Promise(function(h,b){try{u.recordRTC.startRecording(),h()}catch(p){b(p)}})},this.stopRecording=function(){return new Promise(function(h,b){try{u.recordRTC.stopRecording(function(p){if(u.blob=u.recordRTC.getBlob(),!u.blob||!u.blob.size){b("Empty blob.",u.blob);return}h(p)})}catch(p){b(p)}})},this.pauseRecording=function(){return new Promise(function(h,b){try{u.recordRTC.pauseRecording(),h()}catch(p){b(p)}})},this.resumeRecording=function(){return new Promise(function(h,b){try{u.recordRTC.resumeRecording(),h()}catch(p){b(p)}})},this.getDataURL=function(h){return new Promise(function(b,p){try{u.recordRTC.getDataURL(function(_){b(_)})}catch(_){p(_)}})},this.getBlob=function(){return new Promise(function(h,b){try{h(u.recordRTC.getBlob())}catch(p){b(p)}})},this.getInternalRecorder=function(){return new Promise(function(h,b){try{h(u.recordRTC.getInternalRecorder())}catch(p){b(p)}})},this.reset=function(){return new Promise(function(h,b){try{h(u.recordRTC.reset())}catch(p){b(p)}})},this.destroy=function(){return new Promise(function(h,b){try{h(u.recordRTC.destroy())}catch(p){b(p)}})},this.getState=function(){return new Promise(function(h,b){try{h(u.recordRTC.getState())}catch(p){b(p)}})},this.blob=null,this.version="5.6.2"}typeof t<"u"&&(t.RecordRTCPromisesHandler=xe);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function Se(o,r){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),r=r||{},r.width=r.width||640,r.height=r.height||480,r.frameRate=r.frameRate||30,r.bitrate=r.bitrate||1200,r.realtime=r.realtime||!0;var u;function h(){return new ReadableStream({start:function(U){var S=document.createElement("canvas"),E=document.createElement("video"),T=!0;E.srcObject=o,E.muted=!0,E.height=r.height,E.width=r.width,E.volume=0,E.onplaying=function(){S.width=r.width,S.height=r.height;var O=S.getContext("2d"),L=1e3/r.frameRate,G=setInterval(function(){if(u&&(clearInterval(G),U.close()),T&&(T=!1,r.onVideoProcessStarted&&r.onVideoProcessStarted()),O.drawImage(E,0,0),U._controlledReadableStream.state!=="closed")try{U.enqueue(O.getImageData(0,0,r.width,r.height))}catch{}},L)},E.play()}})}var b;function p(U,S){if(!r.workerPath&&!S){u=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(T){T.arrayBuffer().then(function(O){p(U,O)})});return}if(!r.workerPath&&S instanceof ArrayBuffer){var E=new Blob([S],{type:"text/javascript"});r.workerPath=y.createObjectURL(E)}r.workerPath||console.error("workerPath parameter is missing."),b=new Worker(r.workerPath),b.postMessage(r.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),b.addEventListener("message",function(T){T.data==="READY"?(b.postMessage({width:r.width,height:r.height,bitrate:r.bitrate||1200,timebaseDen:r.frameRate||30,realtime:r.realtime}),h().pipeTo(new WritableStream({write:function(O){if(u){console.error("Got image, but recorder is finished!");return}b.postMessage(O.data.buffer,[O.data.buffer])}}))):T.data&&(_||k.push(T.data))})}this.record=function(){k=[],_=!1,this.blob=null,p(o),typeof r.initCallback=="function"&&r.initCallback()};var _;this.pause=function(){_=!0},this.resume=function(){_=!1};function l(U){if(!b){U&&U();return}b.addEventListener("message",function(S){S.data===null&&(b.terminate(),b=null,U&&U())}),b.postMessage(null)}var k=[];this.stop=function(U){u=!0;var S=this;l(function(){S.blob=new Blob(k,{type:"video/webm"}),U(S.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){k=[],_=!1,this.blob=null},this.blob=null}typeof t<"u"&&(t.WebAssemblyRecorder=Se)}(Er)),Er.exports}var Qo=Ko();const sr=Yo(Qo);var Jo=pe('<input type="checkbox" class="h-5 w-5">'),Xo=pe('<input type="number" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring">'),Zo=pe('<input type="text" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring">'),ea=pe('<div class="mb-4"><span class="block mb-2 font-medium"> </span> <!></div>'),ta=pe('<div class="fixed inset-0 bg-black/10 flex items-center justify-center z-50"><div class="bg-[#f4ede1] p-8 min-w-[320px] max-w-[90vw] shadow-lg rounded-3xl"><h2 class="text-xl font-bold mb-6"> </h2> <button class="border rounded-3xl p-4">record voice</button> <form><!> <div class="flex gap-3 justify-end mt-6"><button type="button" class="px-4 py-2 rounded border bg-gray-100 hover:bg-gray-200">취소</button> <button type="submit" class="px-4 py-2 rounded bg-lime-600 text-white hover:bg-lime-700">확인</button></div></form></div></div>');function ra(e,t){ht(t,!1);const[n,i]=wr(),a=()=>ft(Dt,"$ApprovalModalStore",n);let s=Ve(t,"name",8),c=Ve(t,"parameters",8),f=qe({}),v=qe(null);Xr(()=>{Z(f,{...c()})});function g(){var B,A;if(I(v)==null){alert("please record voice");return}const C={};for(const N in I(f)){const z=c()[N],J=I(f)[N];switch(typeof z){case"number":C[N]=Number(J);break;case"boolean":C[N]=!!J;break;default:C[N]=J}}C.voice=I(v),(A=(B=a())==null?void 0:B.resolver)==null||A.call(B,C),Dt.set(null)}function y(){var C,B;(B=(C=a())==null?void 0:C.resolver)==null||B.call(C,null),Dt.set(null)}async function x(){const C=await navigator.mediaDevices.getUserMedia({audio:!0}),B=new sr(C,{type:"audio",mimeType:"audio/wav",recorderType:sr.StereoAudioRecorder,desiredSampRate:16e3,numberOfAudioChannels:1});return B.startRecording(),await ar("녹음이 시작되었습니다.","녹음 시작!"),new Promise((A,N)=>{setTimeout(()=>{B.stopRecording(async()=>{try{const z=B.getDataURL(J=>{const ce=J.split(",")[1];C.getTracks().forEach(me=>me.stop()),B.destroy(),ar("녹음이 완료되었습니다.","분석 중..."),A(ce)})}catch(z){C.getTracks().forEach(J=>J.stop()),B.destroy(),N(z)}})},5e3)})}qt();var w=ta(),D=te(w),M=te(D),$=te(M),W=ue(M,2),Q=ue(W,2),re=te(Q);ri(re,1,()=>Object.entries(I(f)),ti,(C,B)=>{let A=()=>I(B)[0];var N=ea(),z=te(N),J=te(z),ce=ue(z,2);{var me=ae=>{var _e=Jo();Mo(_e,()=>I(f)[A()],Le=>Tr(f,I(f)[A()]=Le)),se(ae,_e)},$e=(ae,_e)=>{{var Le=xe=>{var Se=Xo();Fr(Se,()=>I(f)[A()],o=>Tr(f,I(f)[A()]=o)),se(xe,Se)},He=xe=>{var Se=Zo();Fr(Se,()=>I(f)[A()],o=>Tr(f,I(f)[A()]=o)),se(xe,Se)};Ie(ae,xe=>{typeof c()[A()]=="number"?xe(Le):xe(He,!1)},_e)}};Ie(ce,ae=>{typeof c()[A()]=="boolean"?ae(me):ae($e,!1)})}dt(()=>vt(J,A())),se(C,N)});var Y=ue(re,2),F=te(Y);dt(()=>vt($,s())),Mt("click",W,()=>x().then(C=>Z(v,C))),Mt("click",F,y),Mt("submit",Q,Oo(g)),se(e,w),pt(),i()}const na=""+new URL("../images/tool_failed.png",import.meta.url).href;var ia=pe('<div class="mb-4 text-red-600 font-semibold"> </div>'),oa=pe('<div class="fixed inset-0 bg-black/10 flex items-center justify-center z-50"><div class="bg-[#f5ecdd] rounded-lg p-8 w-96 shadow-lg"><h2 class="text-xl font-bold mb-6">비정상적 송금 금액입니다.</h2> <div class="mb-4"><!> <div class="flex justify-center items-center w-full"><img width="50%" height="50%" alt=""></div></div> <div class="flex gap-3 justify-end mt-6"><button type="button" class="px-4 py-2 rounded border bg-gray-100 hover:bg-gray-200">확인</button></div></div></div>');function aa(e,t){ht(t,!1);const[n,i]=wr(),a=()=>ft(ir,"$DepositWarningModalStore",n);Ve(t,"name",8);let s=Ve(t,"parameters",8),c=Ve(t,"exceedLimit",8),f=qe({});Xr(()=>{Z(f,{...s()})});let v=qe("");function g(){var Y,F;(F=(Y=a())==null?void 0:Y.resolver)==null||F.call(Y,null),ir.set(null)}jn(()=>(I(f),Qr(c())),()=>{I(f).amount!=null&&I(f).balance!=null&&I(f).amount>I(f).balance?Z(v,`💸 현재 보유 금액(${I(f).balance.toLocaleString()}원)을 초과하여 ${I(f).amount.toLocaleString()}원을 송금하려고 합니다.`):I(f).amount!=null&&I(f).amount>=c()?Z(v,`💸 제한 금액(${c().toLocaleString()}원)을 초과하여 ${I(f).amount.toLocaleString()}원을 송금하려고 합니다.`):Z(v,"")}),Nn(),qt();var y=oa(),x=te(y),w=ue(te(x),2),D=te(w);{var M=Y=>{var F=ia(),C=te(F);dt(()=>vt(C,I(v))),se(Y,F)};Ie(D,Y=>{I(v)&&Y(M)})}var $=ue(D,2),W=te($);ni(W,"src",na);var Q=ue(w,2),re=te(Q);Mt("click",re,g),se(e,y),pt(),i()}const sa=""+new URL("../images/tool_success.png",import.meta.url).href;var ua=pe('<div class="fixed inset-0 bg-black/10 flex items-center justify-center z-50"><div class="bg-[#f4ede1] rounded-3xl p-8 w-96 shadow-lg aspect-square"><h2 class="text-xl font-extrabold mb-6 text-center w-full"> <br> <span class="font-light text-sm"> </span></h2> <div class="flex justify-center items-center w-full h-3/4"><img width="50%" height="50%" alt=""></div></div></div>');function la(e,t){ht(t,!1);const[n,i]=wr(),a=()=>ft(or,"$ToolModalStore",n);let s=Ve(t,"name",8),c=Ve(t,"title",8);function f(){var W,Q;(Q=(W=a())==null?void 0:W.resolver)==null||Q.call(W,null),or.set(null)}setTimeout(()=>{f()},1500),qt();var v=ua(),g=te(v),y=te(g),x=te(y),w=ue(x,3),D=te(w),M=ue(y,2),$=te(M);ni($,"src",sa),dt(W=>{vt(x,c()||"도구를 사용했어요!"),vt(D,`- ${W??""} -`)},[()=>s().toLowerCase()],cr),se(e,v),pt(),i()}var fa=pe(`<div class="fixed inset-0 bg-black/20 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-6 w-96 shadow-lg"><h2 class="text-lg font-bold mb-4">도움말❓</h2> <div class="mb-4 space-y-2 text-sm text-gray-800 leading-relaxed"><ul class="list-disc list-inside"><li>메시지를 입력 후 전송 버튼을 누르면 AI가 응답합니다.</li> <li>송금 시에, 승인 여부를 확인하는 팝업이 나타납니다.</li> <li>송금은 '본인 음성 인증' 후에 팝업창에서 진행할 수 있습니다.</li> <li>한정 금액 이상을 보낼 시에 경고창이 출력됩니다.</li></ul></div> <button class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">확인</button></div></div>`);function da(e,t){ht(t,!1);const n=ai();function i(){n("close")}qt();var a=fa(),s=te(a),c=ue(te(s),4);Mt("click",c,i),se(e,a),pt()}async function ca(e,t,n){if(!I(t)){Z(t,!0);try{const i=await navigator.mediaDevices.getUserMedia({audio:!0}),a=new sr(i,{type:"audio",mimeType:"audio/wav",recorderType:sr.StereoAudioRecorder,desiredSampRate:16e3,numberOfAudioChannels:1});a.startRecording(),await new Promise(g=>setTimeout(g,5e3));const s=await new Promise(g=>a.stopRecording(()=>{a.getDataURL(g)}));i.getTracks().forEach(g=>g.stop()),a.destroy();const c=s.split(",")[1],f=await fetch("/post_voice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voice_base64:c})});if(!f.ok)throw new Error(`STT failed: ${f.statusText}`);const v=await f.text();Z(n,v,!0)}catch(i){console.error("SpeechToText error:",i)}finally{Z(t,!1)}}}const va=(e,t)=>e.key==="Enter"&&t();var ha=pe('<div class="w-full bg-amber-50/70 rounded-xl  px-3 py-2 text-sm break-words"><span class="text-xs text-gray-500">실행</span> </div>'),pa=pe('<span class="text-xs text-gray-500">Bella</span><br>',1),ma=pe("<div><!> </div>"),ga=pe('<div class="h-full w-full flex flex-col mx-auto p-8"><div class="flex-1 overflow-auto p-2 space-y-2"></div> <div class="flex gap-2 p-2"><input class="flex-1 px-3 py-2 text-lg rounded-3xl h-16 bg-white" placeholder="메시지 입력"> <button class="px-3 py-2 text-sm bg-white rounded-3xl aspect-square">전송</button> <button class="px-3 py-2 text-sm bg-white rounded-3xl aspect-square">❓</button> <button class="px-3 py-2 text-sm bg-white rounded-3xl aspect-square"><!></button></div></div> <!> <!> <!> <!>',1);function ba(e,t){ht(t,!0);const[n,i]=wr(),a=()=>ft(Dt,"$ApprovalModalStore",n),s=()=>ft(ir,"$DepositWarningModalStore",n),c=()=>ft(en,"$HelpModalStore",n),f=()=>ft(or,"$ToolModalStore",n);let v=crypto.randomUUID();var g=!1;setInterval(async()=>{g&&(await(await fetch("/check-agent-request",{method:"POST"})).json()).status&&(g=!1,await ar("신청한 송금이 승인되었습니다","승인되었어요 !"),y.push({role:"assistant",content:"송금신청이 승인 되었습니다!",type:"tool"}))},3e3);let y=tt([{role:"assistant",content:"안녕하세요!"},{role:"user",content:"안녕하세요!"}]),x=Ne(""),w;async function D(o,r,u=!0){typeof o=="string"?y.push({role:"user",content:o}):y.push({role:"user",content:"APPROVAL_REQUIRED"});const h=await fetch("/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:r,query:o})});if(!h.body)return;const b=h.body.getReader(),p=new TextDecoder;let _=null;for(;;){const{value:l,done:k}=await b.read();if(k)break;const U=p.decode(l);for(let S of U.split(`

`)){if(!S.startsWith("data: "))continue;const E=S.slice(6);if(E!=="[DONE]")if(/^\[TOOL_END\](.*)\[\/TOOL_END\]$/.test(E)){const T=JSON.parse(E.match(/^\[TOOL_END\](.*)\[\/TOOL_END\]$/)[1]);y.push({role:"assistant",content:`${T.name} 도구가 사용되었습니다`,type:"tool"}),await ar(T.name),T.name=="sendAgentRequest"&&T.content.includes("성공")&&(g=!0)}else if(/^\[APPROVAL_REQUIRED\](.*)\[\/APPROVAL_REQUIRED\]$/.test(E))if(u){const[T,O,L]=E.match(/\[APPROVAL_REQUIRED\](.*?):\s*(\{.*\})\[\/APPROVAL_REQUIRED\]/)||[];if(O&&L)return{name:O,parameters:JSON.parse(L)}}else{const T=E.match(/^\[APPROVAL_REQUIRED\](.*)\[\/APPROVAL_REQUIRED\]$/)[1];y.push({role:"assistant",content:T,type:"tool"})}else _?y[y.length-1].content=y[y.length-1].content+E:(_={role:"assistant",content:E},y.push(_))}}return setTimeout(()=>w==null?void 0:w.scrollTo({top:w.scrollHeight}),0),null}let M=5e4;async function $(){const o=I(x).trim(),r=await D(o,v);if(r){r.parameters.amount>=M&&await Ho(r.name,r.parameters,M);const u=await $o(r.name,r.parameters);await D(u||{to_address:"",from_address:"",amount:0},v,!1)}}let W=Ne(!1);var Q=ga(),re=At(Q),Y=te(re);ri(Y,21,()=>y,ti,(o,r)=>{var u=Yt(),h=At(u);{var b=_=>{var l=ha(),k=ue(te(l));dt(()=>vt(k,` : ${I(r).content??""}`)),se(_,l)},p=_=>{var l=ma(),k=te(l);{var U=E=>{var T=pa();se(E,T)};Ie(k,E=>{I(r).role=="assistant"&&I(r).type!="tool"&&E(U)})}var S=ue(k);dt(()=>{Co(l,1,`max-w-[85%] px-3 py-2 text-base break-words rounded-xl w-full
			${I(r).role==="user"?"text-right ml-auto bg-gray-100/70":"text-left bg-amber-50/70"}`),vt(S,` ${I(r).content??""}`)}),se(_,l)};Ie(h,_=>{I(r).type=="tool"?_(b):_(p,!1)})}se(o,u)}),Do(Y,o=>w=o,()=>w);var F=ue(Y,2),C=te(F);C.__keydown=[va,$];var B=ue(C,2);B.__click=$;var A=ue(B,2);A.__click=function(...o){Lr==null||Lr.apply(this,o)};var N=ue(A,2);N.__click=[ca,W,x];var z=te(N);{var J=o=>{var r=dn("⏺️");se(o,r)},ce=o=>{var r=dn("🎙️");se(o,r)};Ie(z,o=>{I(W)?o(J):o(ce,!1)})}var me=ue(re,2);{var $e=o=>{ra(o,{get name(){return a().name},get parameters(){return a().parameters}})};Ie(me,o=>{a()&&o($e)})}var ae=ue(me,2);{var _e=o=>{aa(o,{get name(){return s().name},get parameters(){return s().parameters},exceedLimit:M})};Ie(ae,o=>{s()&&o(_e)})}var Le=ue(ae,2);{var He=o=>{da(o,{$$events:{close(...r){Ar==null||Ar.apply(this,r)}}})};Ie(Le,o=>{c()&&o(He)})}var xe=ue(Le,2);{var Se=o=>{la(o,{get name(){return f().name},get title(){return f().title}})};Ie(xe,o=>{f()&&o(Se)})}dt(()=>N.disabled=I(W)),Fr(C,()=>I(x),o=>Z(x,o)),se(e,Q),pt(),i()}mo(["keydown","click"]);var wa=pe('<div class="w-[360px] h-[640px] bg-white border rounded-3xl shadow-lg p-4 flex flex-col"><!></div>'),ya=pe('<main class="w-screen h-screen flex"><nav class="flex-1 flex flex-col items-center justify-center space-y-6 bg-gray-50"><a href="#/" class="text-xl hover:underline svelte-xnbhzl">홈</a> <a href="#/LLM" class="text-xl hover:underline svelte-xnbhzl">채팅</a></nav> <div class="flex-1 flex items-center justify-center bg-[url(/assets/images/background.png)] bg-center rounded-3xl"><!></div> <div class="flex-1 flex items-center justify-center bg-gray-50">pintech-team01</div></main>');function _a(e){const t={"/":Go,"/LLM":ba};var n=ya(),i=ue(te(n),2),a=te(i);Vo(a,{routes:t,useHash:!0,children:Vi,$$slots:{default:(s,c)=>{const f=cr(()=>c.Component);var v=wa(),g=te(v);Br(g,()=>I(f),(y,x)=>{x(y,{})}),se(s,v)}}}),se(e,n)}bo(_a,{target:document.getElementById("app")});
